// @key 
const URL=new URLs;const isLoon=typeof $loon!=="undefined";let debug=false,Hot_topics=true,Most_visited=false,colorfulDms=false,commandDms=true;if(isLoon){debug=$persistentStore.read("LOG")=="开启"?true:false;Hot_topics=$persistentStore.read("去除动态综合页热门话题")=="开启"?true:false;Most_visited=$persistentStore.read("去除动态综合页最常访问")=="开启"?true:false;colorfulDms=$persistentStore.read("会员弹幕替换为普通弹幕")=="开启"?true:false;commandDms=$persistentStore.read("去除交互式弹幕")=="开启"?true:false}(async()=>{switch(true){case true:default:let K=URL.parse($request?.url);const J=K?.host,X=K?.path,G=X.split("/");const H=($response?.headers?.["Content-Type"]??$response?.headers?.["content-type"])?.split(";")?.[0];let Y={code:0,message:"0",data:{}};switch(H){case undefined:break;case"application/x-protobuf":case"application/grpc":case"application/grpc+proto":case"applecation/octet-stream":let q=$response.body;!function(e){"use strict";function t(e,t,n){return t<=e&&e<=n}"undefined"!=typeof module&&module.exports&&!e["encoding-indexes"]&&(e["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]);var n=Math.floor;function r(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function i(e){return 0<=e&&e<=127}var a=i,s=-1;function o(e){this.tokens=[].slice.call(e),this.tokens.reverse()}o.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():s},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var l=-1;function h(e,t){if(e)throw TypeError("Decoder error");return t||65533}function f(e){throw TypeError("The code point "+e+" could not be encoded.")}function u(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(m,e)?m[e]:null}var c,d,p=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],m={},w=(p.forEach((function(e){e.encodings.forEach((function(e){e.labels.forEach((function(t){m[t]=e}))}))})),{}),g={};function b(e,t){return t&&t[e]||null}function _(e,t){t=t.indexOf(e);return-1===t?null:t}function y(t){if("encoding-indexes"in e)return e["encoding-indexes"][t];throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?")}var k="utf-8";function v(e,t){if(!(this instanceof v))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):k,t=r(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=u(e);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+e);if(g[n.name])return(e=this)._encoding=n,Boolean(t.fatal)&&(e._error_mode="fatal"),Boolean(t.ignoreBOM)&&(e._ignoreBOM=!0),Object.defineProperty||(this.encoding=e._encoding.name.toLowerCase(),this.fatal="fatal"===e._error_mode,this.ignoreBOM=e._ignoreBOM),e;throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?")}function T(t,n){if(!(this instanceof T))throw TypeError("Called as a function. Did you forget 'new'?");n=r(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){n=u(t=void 0!==t?String(t):k);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+t);if(!w[n.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=n}else this._encoding=u("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase()),this}function N(e){var n=e.fatal,r=0,i=0,a=0,o=128,f=191;this.handler=function(e,u){if(u===s&&0!==a)return a=0,h(n);if(u===s)return l;if(0===a){if(t(u,0,127))return u;if(t(u,194,223))a=1,r=31&u;else if(t(u,224,239))224===u&&(o=160),237===u&&(f=159),a=2,r=15&u;else{if(!t(u,240,244))return h(n);240===u&&(o=144),244===u&&(f=143),a=3,r=7&u}return null}var c;return t(u,o,f)?(o=128,f=191,r=r<<6|63&u,(i+=1)!==a?null:(c=r,r=a=i=0,c)):(r=a=i=0,o=128,f=191,e.prepend(u),h(n))}}function E(e){e.fatal;this.handler=function(e,n){if(n===s)return l;if(a(n))return n;t(n,128,2047)?(r=1,i=192):t(n,2048,65535)?(r=2,i=224):t(n,65536,1114111)&&(r=3,i=240);for(var r,i,o=[(n>>6*r)+i];0<r;)o.push(128|63&n>>6*(r-1)),--r;return o}}function B(e,t){var n=t.fatal;this.handler=function(t,r){return r===s?l:i(r)?r:null===(r=e[r-128])?h(n):r}}function U(e,t){t.fatal;this.handler=function(t,n){var r;return n===s?l:a(n)?n:(null===(r=_(n,e))&&f(n),r+128)}}function x(e){var n=e.fatal,r=0,a=0,o=0;this.handler=function(e,f){var u,c,d;return f===s&&0===r&&0===a&&0===o?l:(f!==s||0===r&&0===a&&0===o||(o=a=r=0,h(n)),0!==o?(u=null,t(f,48,57)&&(u=function(e){if(39419<e&&e<189e3||1237575<e)return null;if(7457===e)return 59335;for(var t=0,n=0,r=y("gb18030-ranges"),i=0;i<r.length;++i){var a=r[i];if(!(a[0]<=e))break;t=a[0],n=a[1]}return n+e-t}(10*(126*(10*(r-129)+a-48)+o-129)+f-48)),c=[a,o,f],o=a=r=0,null===u?(e.prepend(c),h(n)):u):0!==a?t(f,129,254)?(o=f,null):(e.prepend([a,f]),a=r=0,h(n)):0!==r?t(f,48,57)?(a=f,null):(c=r,r=0,(d=null)===(u=null===(d=t(f,64,126)||t(f,128,254)?190*(c-129)+(f-(f<127?64:65)):d)?null:b(d,y("gb18030")))&&i(f)&&e.prepend(f),null===u?h(n):u):i(f)?f:128===f?8364:t(f,129,254)?(r=f,null):h(n))}}function I(e,t){e.fatal;this.handler=function(e,r){var i,o;return r===s?l:a(r)?r:58853===r?f(r):t&&8364===r?128:null!==(i=_(r,y("gb18030")))?(o=i%190,[n(i/190)+129,o+(o<63?64:65)]):t?f(r):(i=function(e){if(59335===e)return 7457;for(var t=0,n=0,r=y("gb18030-ranges"),i=0;i<r.length;++i){var a=r[i];if(!(a[1]<=e))break;t=a[1],n=a[0]}return n+e-t}(r),[(o=n(i/10/126/10))+129,(r=n((i-=10*o*126*10)/10/126))+48,(o=n((i-=10*r*126)/10))+129,48+(i-10*o)])}}function R(e){var n=e.fatal,r=0;this.handler=function(e,a){if(a===s&&0!==r)return r=0,h(n);if(a===s&&0===r)return l;if(0===r)return i(a)?a:t(a,129,254)?(r=a,null):h(n);var o=r,f=null;switch(r=0,f=t(a,64,126)||t(a,161,254)?157*(o-129)+(a-(a<127?64:98)):f){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}o=null===f?null:b(f,y("big5"));return null===o&&i(a)&&e.prepend(a),null===o?h(n):o}}function O(e){e.fatal;this.handler=function(e,t){var r,i;return t===s?l:a(t)?t:(r=t,i=d=d||y("big5").map((function(e,t){return t<5024?null:e})),null===(r=9552===r||9566===r||9569===r||9578===r||21313===r||21317===r?i.lastIndexOf(r):_(r,i))||(i=n(r/157)+129)<161?f(t):[i,(t=r%157)+(t<63?64:98)])}}function A(e){var n=e.fatal,r=!1,a=0;this.handler=function(e,o){var f,u;return o===s&&0!==a?(a=0,h(n)):o===s&&0===a?l:142===a&&t(o,161,223)?(a=0,65216+o):143===a&&t(o,161,254)?(r=!0,a=o,null):0!==a?(f=a,a=0,u=null,t(f,161,254)&&t(o,161,254)&&(u=b(94*(f-161)+(o-161),y(r?"jis0212":"jis0208"))),r=!1,t(o,161,254)||e.prepend(o),null===u?h(n):u):i(o)?o:142===o||143===o||t(o,161,254)?(a=o,null):h(n)}}function S(e){e.fatal;this.handler=function(e,r){var i;return r===s?l:a(r)?r:165===r?92:8254===r?126:t(r,65377,65439)?[142,r-65377+161]:null===(i=_(r=8722===r?65293:r,y("jis0208")))?f(r):[n(i/94)+161,i%94+161]}}function D(e){var n=e.fatal,r=0,i=1,a=2,o=3,f=4,u=5,c=6,d=r,p=r,m=0,w=!1;this.handler=function(e,g){switch(d){default:case r:return 27===g?(d=u,null):t(g,0,127)&&14!==g&&15!==g&&27!==g?(w=!1,g):g===s?l:(w=!1,h(n));case i:return 27===g?(d=u,null):92===g?(w=!1,165):126===g?(w=!1,8254):t(g,0,127)&&14!==g&&15!==g&&27!==g&&92!==g&&126!==g?(w=!1,g):g===s?l:(w=!1,h(n));case a:return 27===g?(d=u,null):t(g,33,95)?(w=!1,65344+g):g===s?l:(w=!1,h(n));case o:return 27===g?(d=u,null):t(g,33,126)?(w=!1,m=g,d=f,null):g===s?l:(w=!1,h(n));case f:if(27===g)d=u;else{if(t(g,33,126))return d=o,null===(_=b(94*(m-33)+g-33,y("jis0208")))?h(n):_;g===s?(d=o,e.prepend(g)):d=o}return h(n);case u:return 36===g||40===g?(m=g,d=c,null):(e.prepend(g),w=!1,d=p,h(n));case c:var _=m,k=(m=0,null);return(40===_&&66===g&&(k=r),40===_&&74===g&&(k=i),40===_&&73===g&&(k=a),null!==(k=36!==_||64!==g&&66!==g?k:o))?(d=k,k=w,w=!0,k?h(n):null):(e.prepend([_,g]),w=!1,d=p,h(n))}}}function L(e){e.fatal;var t=0,r=1,i=2,o=t;this.handler=function(e,h){if(h===s&&o!==t)return e.prepend(h),o=t,[27,40,66];if(h===s&&o===t)return l;if(!(o!==t&&o!==r||14!==h&&15!==h&&27!==h))return f(65533);if(o===t&&a(h))return h;if(o===r&&(a(h)&&92!==h&&126!==h||165==h||8254==h)){if(a(h))return h;if(165===h)return 92;if(8254===h)return 126}var u;return a(h)&&o!==t?(e.prepend(h),o=t,[27,40,66]):165!==h&&8254!==h||o===r?null===(u=_(h=8722===h?65293:h,y("jis0208")))?f(h):o!==i?(e.prepend(h),o=i,[27,36,66]):[n(u/94)+33,u%94+33]:(e.prepend(h),o=r,[27,40,74])}}function F(e){var n=e.fatal,r=0;this.handler=function(e,a){var o,f;return a===s&&0!==r?(r=0,h(n)):a===s&&0===r?l:0!==r?(f=r,o=null,r=0,(t(a,64,126)||t(a,128,252))&&(o=188*(f-(f<160?129:193))+a-(a<127?64:65)),t(o,8836,10715)?48508+o:(null===(f=null===o?null:b(o,y("jis0208")))&&i(a)&&e.prepend(a),null===f?h(n):f)):i(a)||128===a?a:t(a,161,223)?65216+a:t(a,129,159)||t(a,224,252)?(r=a,null):h(n)}}function j(e){e.fatal;this.handler=function(e,r){var i;return r===s?l:a(r)||128===r?r:165===r?92:8254===r?126:t(r,65377,65439)?r-65377+161:(i=r=8722===r?65293:r,null===(i=(c=c||y("jis0208").map((function(e,n){return t(n,8272,8835)?null:e}))).indexOf(i))?f(r):[(r=n(i/188))+(r<31?129:193),(r=i%188)+(r<63?64:65)])}}function z(e){var n=e.fatal,r=0;this.handler=function(e,a){var o,f;return a===s&&0!==r?(r=0,h(n)):a===s&&0===r?l:0!==r?(f=r,r=0,f=(o=null)===(o=t(a,65,254)?190*(f-129)+(a-65):o)?null:b(o,y("euc-kr")),null===o&&i(a)&&e.prepend(a),null===f?h(n):f):i(a)?a:t(a,129,254)?(r=a,null):h(n)}}function C(e){e.fatal;this.handler=function(e,t){var r;return t===s?l:a(t)?t:null===(r=_(t,y("euc-kr")))?f(t):[n(r/190)+129,r%190+65]}}function $(e,t){var n=e>>8,e=255&e;return t?[n,e]:[e,n]}function V(e,n){var r=n.fatal,i=null,a=null;this.handler=function(n,o){var f;return o!==s||null===i&&null===a?o===s&&null===i&&null===a?l:null===i?(i=o,null):(o=e?(i<<8)+o:(o<<8)+i,(i=null)!==a?(f=a,a=null,t(o,56320,57343)?65536+1024*(f-55296)+(o-56320):(n.prepend($(o,e)),h(r))):t(o,55296,56319)?(a=o,null):t(o,56320,57343)?h(r):o):h(r)}}function Z(e,n){n.fatal;this.handler=function(n,r){var i;return r===s?l:t(r,0,65535)?$(r,e):(i=$(55296+(r-65536>>10),e),r=$(56320+(r-65536&1023),e),i.concat(r))}}function W(e){e.fatal;this.handler=function(e,t){return t===s?l:i(t)?t:63360+t-128}}function P(e){e.fatal;this.handler=function(e,n){return n===s?l:a(n)?n:t(n,63360,63487)?n-63360+128:f(n)}}Object.defineProperty&&(Object.defineProperty(v.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(v.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(v.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),v.prototype.decode=function(e,t){e="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0);t=r(t),this._do_not_flush||(this._decoder=g[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var n,i=new o(e),a=[];;){var h=i.read();if(h===s)break;if((n=this._decoder.handler(i,h))===l)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}if(!this._do_not_flush){for(;(n=this._decoder.handler(i,i.read()))!==l&&(null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n)),!i.endOfStream()););this._decoder=null}return function(e){t=["UTF-8","UTF-16LE","UTF-16BE"],n=this._encoding.name,-1===t.indexOf(n)||this._ignoreBOM||this._BOMseen||(0<e.length&&65279===e[0]?(this._BOMseen=!0,e.shift()):0<e.length&&(this._BOMseen=!0));for(var t,n,r=e,i="",a=0;a<r.length;++a){var s=r[a];s<=65535?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return i}.call(this,a)},Object.defineProperty&&Object.defineProperty(T.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),T.prototype.encode=function(e,t){e=void 0===e?"":String(e),t=r(t),this._do_not_flush||(this._encoder=w[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var n,i=new o(function(e){for(var t=String(e),n=t.length,r=0,i=[];r<n;){var a,s=t.charCodeAt(r);s<55296||57343<s?i.push(s):56320<=s&&s<=57343?i.push(65533):55296<=s&&s<=56319&&(r!==n-1&&56320<=(a=t.charCodeAt(r+1))&&a<=57343?(i.push(65536+((1023&s)<<10)+(1023&a)),r+=1):i.push(65533)),r+=1}return i}(e)),a=[];;){var h=i.read();if(h===s)break;if((n=this._encoder.handler(i,h))===l)break;Array.isArray(n)?a.push.apply(a,n):a.push(n)}if(!this._do_not_flush){for(;;){if((n=this._encoder.handler(i,i.read()))===l)break;Array.isArray(n)?a.push.apply(a,n):a.push(n)}this._encoder=null}return new Uint8Array(a)},w["UTF-8"]=function(e){return new E(e)},g["UTF-8"]=function(e){return new N(e)},"encoding-indexes"in e&&p.forEach((function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach((function(e){var e=e.name,t=y(e.toLowerCase());g[e]=function(e){return new B(t,e)},w[e]=function(e){return new U(t,e)}}))})),g.GBK=function(e){return new x(e)},w.GBK=function(e){return new I(e,!0)},w.gb18030=function(e){return new I(e)},g.gb18030=function(e){return new x(e)},w.Big5=function(e){return new O(e)},g.Big5=function(e){return new R(e)},w["EUC-JP"]=function(e){return new S(e)},g["EUC-JP"]=function(e){return new A(e)},w["ISO-2022-JP"]=function(e){return new L(e)},g["ISO-2022-JP"]=function(e){return new D(e)},w.Shift_JIS=function(e){return new j(e)},g.Shift_JIS=function(e){return new F(e)},w["EUC-KR"]=function(e){return new C(e)},g["EUC-KR"]=function(e){return new z(e)},w["UTF-16BE"]=function(e){return new Z(!0,e)},g["UTF-16BE"]=function(e){return new V(!0,e)},w["UTF-16LE"]=function(e){return new Z(!1,e)},g["UTF-16LE"]=function(e){return new V(!1,e)},w["x-user-defined"]=function(e){return new P(e)},g["x-user-defined"]=function(e){return new W(e)},e.TextEncoder||(e.TextEncoder=T),e.TextDecoder||(e.TextDecoder=v),"undefined"!=typeof module&&module.exports&&(module.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})}(this||{});var e,t,n,r,i,a=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t=t||{})h.call(t,n)&&u(e,n,t[n]);if(l)for(var n of l(t))f.call(t,n)&&u(e,n,t[n]);return e},d=(e,t)=>s(e,o(t));function p(){let e=0,t=0;for(let r=0;r<28;r+=7){var n=this.buf[this.pos++];if(e|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}var r=this.buf[this.pos++];if(e|=(15&r)<<28,t=(112&r)>>4,0==(128&r))return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){var i=this.buf[this.pos++];if(t|=(127&i)<<n,0==(128&i))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function m(e,t,n){for(let a=0;a<28;a+=7){var r=e>>>a,i=!(r>>>7==0&&0==t);if(n.push(255&(i?128|r:r)),!i)return}var a=e>>>28&15|(7&t)<<4,s=!(t>>3==0);if(n.push(255&(s?128|a:a)),s){for(let e=3;e<31;e+=7){var o=t>>>e,l=!(o>>>7==0);if(n.push(255&(l?128|o:o)),!l)return}n.push(t>>>31&1)}}const Q=4294967296;function w(e){var t="-"==e[0];t&&(e=e.slice(1));let n=0,r=0;function i(t,i){t=Number(e.slice(t,i));r*=1e6,(n=1e6*n+t)>=Q&&(r+=n/Q|0,n%=Q)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),[t,n,r]}function g(e,t){if(t<=2097151)return""+(Q*t+e);var n=(e>>>24|t<<8)>>>0&16777215,t=t>>16&65535;let r=(16777215&e)+6777216*n+6710656*t,i=n+8147497*t,a=2*t;e=1e7;function s(e,t){e=e?String(e):"";return t?"0000000".slice(e.length)+e:e}return r>=e&&(i+=Math.floor(r/e),r%=e),i>=e&&(a+=Math.floor(i/e),i%=e),s(a,0)+s(i,a)+s(r,1)}function b(e,t){if(0<=e){for(;127<e;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function _(){let e=this.buf[this.pos++];var t=127&e;if(0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<7,0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<14,0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<21,0==(128&e))return this.assertBounds(),t;t|=(15&(e=this.buf[this.pos++]))<<28;for(let t=5;0!=(128&e)&&t<10;t++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}function y(){var e=new DataView(new ArrayBuffer(8));return void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}const ee=y();function k(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const te=/^-?[0-9]+$/,ne=4294967296;class re{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){var e=this.hi*ne+(this.lo>>>0);if(Number.isSafeInteger(e))return e;throw new Error("cannot convert to safe number")}}const ie=class extends re{static from(e){if(ee)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=ee.C(e);case"number":if(0===e)return this.ZERO;e=ee.C(e);case"bigint":if(!e)return this.ZERO;if(e<ee.UMIN)throw new Error("signed value for ulong");if(e>ee.UMAX)throw new Error("ulong too large");return ee.V.setBigUint64(0,e,!0),new ie(ee.V.getInt32(0,!0),ee.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!te.test(e))throw new Error("string is no integer");var[t,n,r]=w(e);if(t)throw new Error("signed value");return new ie(n,r);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new ie(e,e/ne)}throw new Error("unknown value "+typeof e)}toString(){return ee?this.toBigInt().toString():g(this.lo,this.hi)}toBigInt(){return k(ee),ee.V.setInt32(0,this.lo,!0),ee.V.setInt32(4,this.hi,!0),ee.V.getBigUint64(0,!0)}};let ae=ie;ae.ZERO=new ie(0,0);const se=class extends re{static from(e){if(ee)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=ee.C(e);case"number":if(0===e)return this.ZERO;e=ee.C(e);case"bigint":if(!e)return this.ZERO;if(e<ee.MIN)throw new Error("ulong too small");if(e>ee.MAX)throw new Error("ulong too large");return ee.V.setBigInt64(0,e,!0),new se(ee.V.getInt32(0,!0),ee.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;var t,n,r;if(e=e.trim(),te.test(e))return[t,r,n]=w(e),r=new se(r,n),t?r.negate():r;throw new Error("string is no integer");case"number":if(0==e)return this.ZERO;if(Number.isSafeInteger(e))return 0<e?new se(e,e/ne):new se(-e,-e/ne).negate();throw new Error("number is no integer")}throw new Error("unknown value "+typeof e)}isNegative(){return 0!=(2147483648&this.hi)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new se(t,e)}toString(){var e;return ee?this.toBigInt().toString():this.isNegative()?"-"+g((e=this.negate()).lo,e.hi):g(this.lo,this.hi)}toBigInt(){return k(ee),ee.V.setInt32(0,this.lo,!0),ee.V.setInt32(4,this.hi,!0),ee.V.getBigInt64(0,!0)}};let oe=se;oe.ZERO=new se(0,0);class le{constructor(e,t){this.varint64=p,this.uint32=_,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder("utf-8",{fatal:!0})}tag(){var e=this.uint32(),t=e>>>3,e=7&e;if(t<=0||e<0||5<e)throw new Error("illegal tag: field no "+t+" wire type "+e);return[t,e]}skip(e){var n,r=this.pos;switch(e){case t.Varint:for(;128&this.buf[this.pos++];);break;case t.Bit64:this.pos+=4;case t.Bit32:this.pos+=4;break;case t.LengthDelimited:var i=this.uint32();this.pos+=i;break;case t.StartGroup:for(;(n=this.tag()[1])!==t.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){var e=this.uint32();return e>>>1^-(1&e)}int64(){return new oe(...this.varint64())}uint64(){return new ae(...this.varint64())}sint64(){var[e,t]=this.varint64(),n=-(1&e),e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n;return new oe(e,t)}bool(){var[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new ae(this.sfixed32(),this.sfixed32())}sfixed64(){return new oe(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){var e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function v(e,t){if(!e)throw new Error(t)}const he=34028234663852886e22,fe=-34028234663852886e22,ue=4294967295,ce=2147483647,de=-2147483648;function T(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>ce||e<de)throw new Error("invalid int 32: "+e)}function N(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>ue||e<0)throw new Error("invalid uint 32: "+e)}function E(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>he||e<fe))throw new Error("invalid float 32: "+e)}class pe{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;var t=new Uint8Array(e);let n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){var e=this.finish(),t=this.stack.pop();if(t)return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e);throw new Error("invalid state, fork stack empty")}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(N(e);127<e;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return T(e),b(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){e=this.textEncoder.encode(e);return this.uint32(e.byteLength),this.raw(e)}float(e){E(e);var t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){N(e);var t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){T(e);var t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return T(e),b(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){var t=new Uint8Array(8),n=new DataView(t.buffer),e=oe.from(e);return n.setInt32(0,e.lo,!0),n.setInt32(4,e.hi,!0),this.raw(t)}fixed64(e){var t=new Uint8Array(8),n=new DataView(t.buffer),e=ae.from(e);return n.setInt32(0,e.lo,!0),n.setInt32(4,e.hi,!0),this.raw(t)}int64(e){e=oe.from(e);return m(e.lo,e.hi,this.buf),this}sint64(e){var e=oe.from(e),t=e.hi>>31;return m(e.lo<<1^t,(e.hi<<1|e.lo>>>31)^t,this.buf),this}uint64(e){e=ae.from(e);return m(e.lo,e.hi,this.buf),this}}function B(e){return e?c(c({},we),e):we}function U(e){return e?c(c({},me),e):me}!function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,r,i,a,s)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:i,wireType:a,data:s})},e.onWrite=(t,n,r)=>{for(var{no:i,wireType:a,data:s}of e.list(n))r.tag(i,a).raw(s)},e.list=(n,r)=>t(n)?(n=n[e.symbol],r?n.filter((e=>e.no==r)):n):[],e.last=(t,n)=>e.list(t,n).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}(e=e||{});const me={readUnknownField:!0,readerFactory:e=>new le(e)},we={writeUnknownFields:!0,writerFactory:()=>new pe},ge=(!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(t=t||{}),Symbol.for("protobuf-ts/message-type"));function x(e){let t=!1;var n=[];for(let i=0;i<e.length;i++){var r=e.charAt(i);"_"==r?t=!0:/\d/.test(r)?(n.push(r),t=!0):t?(n.push(r.toUpperCase()),t=!1):0==i?n.push(r.toLowerCase()):n.push(r)}return n.join("")}function I(e){var t;return e.localName=null!=(t=e.localName)?t:x(e.name),e.jsonName=null!=(t=e.jsonName)?t:x(e.name),e.repeat=null!=(t=e.repeat)?t:0,e.opt=null!=(t=e.opt)?t:!e.repeat&&(!e.oneof&&"message"==e.kind),e}function R(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0===e[e.oneofKind]?!1:2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(n=n||{}),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(r=r||{}),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(i=i||{});class be{constructor(e){this.fields=null!=(e=e.fields)?e:[]}prepare(){if(!this.data){var e,t=[],n=[],r=[];for(e of this.fields)if(e.oneof)r.includes(e.oneof)||(r.push(e.oneof),t.push(e.oneof),n.push(e.oneof));else switch(n.push(e.localName),e.kind){case"scalar":case"enum":e.opt&&!e.repeat||t.push(e.localName);break;case"message":e.repeat&&t.push(e.localName);break;case"map":t.push(e.localName)}this.data={req:t,known:n,oneofs:Object.values(r)}}}is(e,t,n=!1){if(!(t<0)){if(null==e||"object"!=typeof e)return!1;this.prepare();let i=Object.keys(e),a=this.data;if(i.length<a.req.length||a.req.some((e=>!i.includes(e))))return!1;if(!n&&i.some((e=>!a.known.includes(e))))return!1;if(!(t<1)){for(const i of a.oneofs){const a=e[i];if(!R(a))return!1;if(void 0!==a.oneofKind){var r=this.fields.find((e=>e.localName===a.oneofKind));if(!r)return!1;if(!this.field(a[a.oneofKind],r,n,t))return!1}}for(const r of this.fields)if(void 0===r.oneof&&!this.field(e[r.localName],r,n,t))return!1}}return!0}field(e,t,r,i){var a=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:a?this.scalars(e,t.T,i,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:a?this.scalars(e,n.INT32,i):this.scalar(e,n.INT32);case"message":return void 0===e?!0:a?this.messages(e,t.T(),r,i):this.message(e,t.T(),r,i);case"map":if("object"!=typeof e||null===e)return!1;if(i<2)return!0;if(!this.mapKeys(e,t.K,i))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,i,t.V.L);case"enum":return this.scalars(Object.values(e),n.INT32,i);case"message":return this.messages(Object.values(e),t.V.T(),r,i)}}return!0}message(e,t,n,r){return n?t.isAssignable(e,r):t.is(e,r)}messages(e,t,n,r){if(!Array.isArray(e))return!1;if(!(r<2))if(n){for(let n=0;n<e.length&&n<r;n++)if(!t.isAssignable(e[n],r-1))return!1}else for(let n=0;n<e.length&&n<r;n++)if(!t.is(e[n],r-1))return!1;return!0}scalar(e,t,i){var a=typeof e;switch(t){case n.UINT64:case n.FIXED64:case n.INT64:case n.SFIXED64:case n.SINT64:switch(i){case r.BIGINT:return"bigint"==a;case r.NUMBER:return"number"==a&&!isNaN(e);default:return"string"==a}case n.BOOL:return"boolean"==a;case n.STRING:return"string"==a;case n.BYTES:return e instanceof Uint8Array;case n.DOUBLE:case n.FLOAT:return"number"==a&&!isNaN(e);default:return"number"==a&&Number.isInteger(e)}}scalars(e,t,n,r){if(!Array.isArray(e))return!1;if(!(n<2)&&Array.isArray(e))for(let i=0;i<e.length&&i<n;i++)if(!this.scalar(e[i],t,r))return!1;return!0}mapKeys(e,t,i){var a=Object.keys(e);switch(t){case n.INT32:case n.FIXED32:case n.SFIXED32:case n.SINT32:case n.UINT32:return this.scalars(a.slice(0,i).map((e=>parseInt(e))),t,i);case n.BOOL:return this.scalars(a.slice(0,i).map((e=>"true"==e||"false"!=e&&e)),t,i);default:return this.scalars(a,t,i,r.STRING)}}}function O(e){var t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}function A(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}let _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),ye=[];for(let Ie=0;Ie<_e.length;Ie++)ye[_e[Ie].charCodeAt(0)]=Ie;function S(e){let t=3*e.length/4,n=("="==e[e.length-2]?t-=2:"="==e[e.length-1]&&--t,new Uint8Array(t)),r=0,i=0,a,s=0;for(let t=0;t<e.length;t++){if(void 0===(a=ye[e.charCodeAt(t)]))switch(e[t]){case"=":i=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=a,i=1;break;case 1:n[r++]=s<<2|(48&a)>>4,s=a,i=2;break;case 2:n[r++]=(15&s)<<4|(60&a)>>2,s=a,i=3;break;case 3:n[r++]=(3&s)<<6|a,i=0}}if(1==i)throw Error("invalid base64 string.");return n.subarray(0,r)}function D(e){let t="",n=0,r,i=0;for(let a=0;a<e.length;a++)switch(r=e[a],n){case 0:t+=_e[r>>2],i=(3&r)<<4,n=1;break;case 1:t+=_e[i|r>>4],i=(15&r)<<2,n=2;break;case 2:t=(t+=_e[i|r>>6])+_e[63&r],n=0}return n&&(t=t+_e[i]+"=",1==n&&(t+="=")),t}function L(e,t){switch(t){case r.BIGINT:return e.toBigInt();case r.NUMBER:return e.toNumber();default:return e.toString()}}ye["-".charCodeAt(0)]=_e.indexOf("+"),ye["_".charCodeAt(0)]=_e.indexOf("/");class ke{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};for(const t of null!=(e=this.info.fields)?e:[])this.fMap[t.name]=t,this.fMap[t.jsonName]=t,this.fMap[t.localName]=t}}assert(e,t,n){if(!e){let e=O(n);throw"number"!=e&&"boolean"!=e||(e=n.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#`+t)}}read(e,t,i){this.prepare();var a,s,o=[];for([a,s]of Object.entries(e)){var l=this.fMap[a];if(!l){if(i.ignoreUnknownFields)continue;throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: `+a)}var h=l.localName;let e;if(l.oneof){if(o.includes(l.oneof))throw new Error(`Multiple members of the oneof group "${l.oneof}" of ${this.info.typeName} are present in JSON.`);o.push(l.oneof),e=t[l.oneof]={oneofKind:h}}else e=t;if("map"==l.kind){if(null!==s){this.assert(A(s),l.name,s);var f,u,c=e[h];for([f,u]of Object.entries(s)){this.assert(null!==u,l.name+" map value",null);let e;switch(l.V.kind){case"message":e=l.V.T().internalJsonRead(u,i);break;case"enum":if(!1===(e=this.enum(l.V.T(),u,l.name,i.ignoreUnknownFields)))continue;break;case"scalar":e=this.scalar(u,l.V.T,l.V.L,l.name)}this.assert(void 0!==e,l.name+" map value",u);let t=f;l.K==n.BOOL&&(t="true"==t||"false"!=t&&t),c[t=this.scalar(t,l.K,r.STRING,l.name).toString()]=e}}}else if(l.repeat){if(null!==s){this.assert(Array.isArray(s),l.name,s);var d=e[h];for(const e of s){this.assert(null!==e,l.name,null);let t;switch(l.kind){case"message":t=l.T().internalJsonRead(e,i);break;case"enum":if(!1===(t=this.enum(l.T(),e,l.name,i.ignoreUnknownFields)))continue;break;case"scalar":t=this.scalar(e,l.T,l.L,l.name)}this.assert(void 0!==t,l.name,s),d.push(t)}}}else switch(l.kind){case"message":null===s&&"google.protobuf.Value"!=l.T().typeName?this.assert(void 0===l.oneof,l.name+" (oneof member)",null):e[h]=l.T().internalJsonRead(s,i,e[h]);break;case"enum":var p=this.enum(l.T(),s,l.name,i.ignoreUnknownFields);!1!==p&&(e[h]=p);break;case"scalar":e[h]=this.scalar(s,l.T,l.L,l.name)}}}enum(e,t,n,r){if("google.protobuf.NullValue"==e[0]&&v(null===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return v(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let a=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(a=t.substring(e[2].length));var i=e[1][a];return void 0===i&&r?!1:(v("number"==typeof i,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),i)}v(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,r,i){let a;try{switch(t){case n.DOUBLE:case n.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e)a="empty string";else if("string"==typeof e&&e.trim().length!==e.length)a="extra whitespace";else if("string"==typeof e||"number"==typeof e){var s=Number(e);if(Number.isNaN(s))a="not a number";else{if(Number.isFinite(s))return t==n.FLOAT&&E(s),s;a="too large or small"}}break;case n.INT32:case n.FIXED32:case n.SFIXED32:case n.SINT32:case n.UINT32:if(null===e)return 0;let o;if("number"==typeof e?o=e:""===e?a="empty string":"string"==typeof e&&(e.trim().length!==e.length?a="extra whitespace":o=Number(e)),void 0===o)break;return(t==n.UINT32?N:T)(o),o;case n.INT64:case n.SFIXED64:case n.SINT64:if(null===e)return L(oe.ZERO,r);if("number"!=typeof e&&"string"!=typeof e)break;return L(oe.from(e),r);case n.FIXED64:case n.UINT64:if(null===e)return L(ae.ZERO,r);if("number"!=typeof e&&"string"!=typeof e)break;return L(ae.from(e),r);case n.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case n.STRING:if(null===e)return"";if("string"!=typeof e){a="extra whitespace";break}try{encodeURIComponent(e)}catch(i){0;break}return e;case n.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return S(e)}}catch(i){a=i.message}this.assert(!1,i+(a?" - "+a:""),e)}}class ve{constructor(e){this.fields=null!=(e=e.fields)?e:[]}write(e,t){var n,r,i={},a=e;for(const e of this.fields)e.oneof?(n=a[e.oneof]).oneofKind===e.localName&&(r="scalar"==e.kind||"enum"==e.kind?d(c({},t),{emitDefaultValues:!0}):t,v(void 0!==(n=this.field(e,n[e.localName],r))),i[t.useProtoFieldName?e.name:e.jsonName]=n):void 0!==(r=this.field(e,a[e.localName],t))&&(i[t.useProtoFieldName?e.name:e.jsonName]=r);return i}field(e,t,n){let r=void 0;if("map"==e.kind){v("object"==typeof t&&null!==t);var i={};switch(e.V.kind){case"scalar":for(var[a,s]of Object.entries(t)){s=this.scalar(e.V.T,s,e.name,!1,!0);v(void 0!==s),i[a.toString()]=s}break;case"message":var o,l,h=e.V.T();for([o,l]of Object.entries(t)){var f=this.message(h,l,e.name,n);v(void 0!==f),i[o.toString()]=f}break;case"enum":var u,c,d=e.V.T();for([u,c]of Object.entries(t)){v(void 0===c||"number"==typeof c);var p=this.enum(d,c,e.name,!1,!0,n.enumAsInteger);v(void 0!==p),i[u.toString()]=p}}(n.emitDefaultValues||0<Object.keys(i).length)&&(r=i)}else if(e.repeat){v(Array.isArray(t));var m=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){var w=this.scalar(e.T,t[n],e.name,e.opt,!0);v(void 0!==w),m.push(w)}break;case"enum":var g=e.T();for(let r=0;r<t.length;r++){v(void 0===t[r]||"number"==typeof t[r]);var b=this.enum(g,t[r],e.name,e.opt,!0,n.enumAsInteger);v(void 0!==b),m.push(b)}break;case"message":var _=e.T();for(let r=0;r<t.length;r++){var y=this.message(_,t[r],e.name,n);v(void 0!==y),m.push(y)}}(n.emitDefaultValues||0<m.length||n.emitDefaultValues)&&(r=m)}else switch(e.kind){case"scalar":r=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":r=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":r=this.message(e.T(),t,e.name,n)}return r}enum(e,t,n,r,i,a){if("google.protobuf.NullValue"==e[0])return null;if(void 0===t)v(r);else if(0!==t||i||r)return v("number"==typeof t),v(Number.isInteger(t)),a||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}message(e,t,n,r){return void 0===t?r.emitDefaultValues?null:void 0:e.internalJsonWrite(t,r)}scalar(e,t,r,i,a){if(void 0===t)v(i);else{var s=a||i;switch(e){case n.INT32:case n.SFIXED32:case n.SINT32:return 0===t?s?0:void 0:(T(t),t);case n.FIXED32:case n.UINT32:return 0===t?s?0:void 0:(N(t),t);case n.FLOAT:E(t);case n.DOUBLE:return 0===t?s?0:void 0:(v("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case n.STRING:return""===t?s?"":void 0:(v("string"==typeof t),t);case n.BOOL:return!1===t?!s&&void 0:(v("boolean"==typeof t),t);case n.UINT64:case n.FIXED64:v("number"==typeof t||"string"==typeof t||"bigint"==typeof t);var o=ae.from(t);return o.isZero()&&!s?void 0:o.toString();case n.INT64:case n.SFIXED64:case n.SINT64:v("number"==typeof t||"string"==typeof t||"bigint"==typeof t);o=oe.from(t);return o.isZero()&&!s?void 0:o.toString();case n.BYTES:return(v(t instanceof Uint8Array),t.byteLength)?D(t):s?"":void 0}}}}function F(e,t=r.STRING){switch(e){case n.BOOL:return!1;case n.UINT64:case n.FIXED64:return L(ae.ZERO,t);case n.INT64:case n.SFIXED64:case n.SINT64:return L(oe.ZERO,t);case n.DOUBLE:case n.FLOAT:return 0;case n.BYTES:return new Uint8Array(0);case n.STRING:return"";default:return 0}}class Te{constructor(e){this.info=e}prepare(){var e;this.fieldNoToField||(e=null!=(e=this.info.fields)?e:[],this.fieldNoToField=new Map(e.map((e=>[e.no,e]))))}read(r,i,a,s){this.prepare();for(var o=void 0===s?r.len:r.pos+s;r.pos<o;){var[l,h]=r.tag(),f=this.fieldNoToField.get(l);if(f){let e=i,s=f.repeat,o=f.localName;switch(f.oneof&&(e=e[f.oneof]).oneofKind!==o&&(e=i[f.oneof]={oneofKind:o}),f.kind){case"scalar":case"enum":var u="enum"==f.kind?n.INT32:f.T,c="scalar"==f.kind?f.L:void 0;if(s){var d=e[o];if(h==t.LengthDelimited&&u!=n.STRING&&u!=n.BYTES)for(var p=r.uint32()+r.pos;r.pos<p;)d.push(this.scalar(r,u,c));else d.push(this.scalar(r,u,c))}else e[o]=this.scalar(r,u,c);break;case"message":s?(m=e[o],w=f.T().internalBinaryRead(r,r.uint32(),a),m.push(w)):e[o]=f.T().internalBinaryRead(r,r.uint32(),a,e[o]);break;case"map":var[m,w]=this.mapEntry(f,r,a);e[o][m]=w}}else{var g=a.readUnknownField;if("throw"==g)throw new Error(`Unknown field ${l} (wire type ${h}) for `+this.info.typeName);var b=r.skip(h);!1!==g&&(!0===g?e.onRead:g)(this.info.typeName,i,l,h,b)}}}mapEntry(e,t,i){var a=t.uint32(),s=t.pos+a;let o=void 0,l=void 0;for(;t.pos<s;){var[h,f]=t.tag();switch(h){case 1:o=e.K==n.BOOL?t.bool().toString():this.scalar(t,e.K,r.STRING);break;case 2:switch(e.V.kind){case"scalar":l=this.scalar(t,e.V.T,e.V.L);break;case"enum":l=t.int32();break;case"message":l=e.V.T().internalBinaryRead(t,t.uint32(),i)}break;default:throw new Error(`Unknown field ${h} (wire type ${f}) in map entry for ${this.info.typeName}#`+e.name)}}if(void 0===o&&(a=F(e.K),o=e.K==n.BOOL?a.toString():a),void 0===l)switch(e.V.kind){case"scalar":l=F(e.V.T,e.V.L);break;case"enum":l=0;break;case"message":l=e.V.T().create()}return[o,l]}scalar(e,t,r){switch(t){case n.INT32:return e.int32();case n.STRING:return e.string();case n.BOOL:return e.bool();case n.DOUBLE:return e.double();case n.FLOAT:return e.float();case n.INT64:return L(e.int64(),r);case n.UINT64:return L(e.uint64(),r);case n.FIXED64:return L(e.fixed64(),r);case n.FIXED32:return e.fixed32();case n.BYTES:return e.bytes();case n.UINT32:return e.uint32();case n.SFIXED32:return e.sfixed32();case n.SFIXED64:return L(e.sfixed64(),r);case n.SINT32:return e.sint32();case n.SINT64:return L(e.sint64(),r)}}}class Ne{constructor(e){this.info=e}prepare(){var e;this.fields||(e=this.info.fields?this.info.fields.concat():[],this.fields=e.sort(((e,t)=>e.no-t.no)))}write(t,r,a){this.prepare();for(const e of this.fields){let f,u,c=e.repeat,d=e.localName;if(e.oneof){var s=t[e.oneof];if(s.oneofKind!==d)continue;f=s[d],u=!0}else f=t[d],u=!1;switch(e.kind){case"scalar":case"enum":var o="enum"==e.kind?n.INT32:e.T;if(c)if(v(Array.isArray(f)),c==i.PACKED)this.packed(r,o,e.no,f);else for(const t of f)this.scalar(r,o,e.no,t,!0);else void 0===f?v(e.opt):this.scalar(r,o,e.no,f,u||e.opt);break;case"message":if(c){v(Array.isArray(f));for(const t of f)this.message(r,a,e.T(),e.no,t)}else this.message(r,a,e.T(),e.no,f);break;case"map":v("object"==typeof f&&null!==f);for(var[l,h]of Object.entries(f))this.mapEntry(r,a,e,l,h)}}var f=a.writeUnknownFields;!1!==f&&(!0===f?e.onWrite:f)(this.info.typeName,t,r)}mapEntry(e,r,i,a,s){e.tag(i.no,t.LengthDelimited),e.fork();let o=a;switch(i.K){case n.INT32:case n.FIXED32:case n.UINT32:case n.SFIXED32:case n.SINT32:o=Number.parseInt(a);break;case n.BOOL:v("true"==a||"false"==a),o="true"==a}switch(this.scalar(e,i.K,1,o,!0),i.V.kind){case"scalar":this.scalar(e,i.V.T,2,s,!0);break;case"enum":this.scalar(e,n.INT32,2,s,!0);break;case"message":this.message(e,r,i.V.T(),2,s)}e.join()}message(e,n,r,i,a){void 0!==a&&(r.internalBinaryWrite(a,e.tag(i,t.LengthDelimited).fork(),n),e.join())}scalar(e,t,n,r,i){var[t,a,s]=this.scalarInfo(t,r);s&&!i||(e.tag(n,t),e[a](r))}packed(e,r,i,a){if(a.length){v(r!==n.BYTES&&r!==n.STRING),e.tag(i,t.LengthDelimited),e.fork();var[,s]=this.scalarInfo(r);for(let t=0;t<a.length;t++)e[s](a[t]);e.join()}}scalarInfo(e,r){let i=t.Varint,a;var s=void 0===r;let o=0===r;switch(e){case n.INT32:a="int32";break;case n.STRING:o=s||!r.length,i=t.LengthDelimited,a="string";break;case n.BOOL:o=!1===r,a="bool";break;case n.UINT32:a="uint32";break;case n.DOUBLE:i=t.Bit64,a="double";break;case n.FLOAT:i=t.Bit32,a="float";break;case n.INT64:o=s||oe.from(r).isZero(),a="int64";break;case n.UINT64:o=s||ae.from(r).isZero(),a="uint64";break;case n.FIXED64:o=s||ae.from(r).isZero(),i=t.Bit64,a="fixed64";break;case n.BYTES:o=s||!r.byteLength,i=t.LengthDelimited,a="bytes";break;case n.FIXED32:i=t.Bit32,a="fixed32";break;case n.SFIXED32:i=t.Bit32,a="sfixed32";break;case n.SFIXED64:o=s||oe.from(r).isZero(),i=t.Bit64,a="sfixed64";break;case n.SINT32:a="sint32";break;case n.SINT64:o=s||oe.from(r).isZero(),a="sint64"}return[i,a,s||o]}}function j(e){var t,n={};Object.defineProperty(n,ge,{enumerable:!1,value:e});for(t of e.fields){var r=t.localName;if(!t.opt)if(t.oneof)n[t.oneof]={oneofKind:void 0};else if(t.repeat)n[r]=[];else switch(t.kind){case"scalar":n[r]=F(t.T,t.L);break;case"enum":n[r]=0;break;case"map":n[r]={}}}return n}function z(e,t,n){let r,i=n,a;for(var s of e.fields){var o=s.localName;if(s.oneof){var l=i[s.oneof];if(void 0===l)continue;if(r=l[o],(a=t[s.oneof]).oneofKind=l.oneofKind,void 0===r){delete a[o];continue}}else if(r=i[o],a=t,void 0===r)continue;switch(s.kind){case"scalar":case"enum":s.repeat?a[o]=r.concat():a[o]=r;break;case"message":var h=s.T();if(s.repeat)for(let e=0;e<r.length;e++)a[o][e]=h.create(r[e]);else void 0===a[o]?a[o]=h.create(r):h.mergePartial(a[o],r);break;case"map":switch(s.V.kind){case"scalar":case"enum":Object.assign(a[o],r);break;case"message":var f,u=s.V.T();for(f of Object.keys(r))a[o][f]=u.create(r[f])}}}}const Ee={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},Be={ignoreUnknownFields:!1};function C(e){return e?c(c({},Be),e):Be}function $(e){return e?c(c({},Ee),e):Ee}function V(e,t,r){if(t!==r){if(!t||!r)return!1;for(var i of e.fields){var a=i.localName,s=(i.oneof?t[i.oneof]:t)[a],o=(i.oneof?r[i.oneof]:r)[a];switch(i.kind){case"enum":case"scalar":var l="enum"==i.kind?n.INT32:i.T;if((i.repeat?W:Z)(l,s,o))break;return!1;case"map":if("message"==i.V.kind?P(i.V.T(),Ue(s),Ue(o)):W("enum"==i.V.kind?n.INT32:i.V.T,Ue(s),Ue(o)))break;return!1;case"message":l=i.T();if(i.repeat?P(l,s,o):l.equals(s,o))break;return!1}}}return!0}const Ue=Object.values;function Z(e,t,r){if(t!==r){if(e!==n.BYTES)return!1;var i=t,a=r;if(i.length!==a.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!=a[e])return!1}return!0}function W(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!Z(e,t[r],n[r]))return!1;return!0}function P(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}class xe{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(I),this.options=null!=n?n:{},this.refTypeCheck=new be(this),this.refJsonReader=new ke(this),this.refJsonWriter=new ve(this),this.refBinReader=new Te(this),this.refBinWriter=new Ne(this)}create(e){var t=j(this);return void 0!==e&&z(this,t,e),t}clone(e){var t=this.create();return z(this,t,e),t}equals(e,t){return V(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){z(this,e,t)}fromBinary(e,t){t=U(t);return this.internalBinaryRead(t.readerFactory(e),e.byteLength,t)}fromJson(e,t){return this.internalJsonRead(e,C(t))}fromJsonString(e,t){e=JSON.parse(e);return this.fromJson(e,t)}toJson(e,t){return this.internalJsonWrite(e,$(t))}toJsonString(e,t){var e=this.toJson(e,t);return JSON.stringify(e,null,null!=(e=null==t?void 0:t.prettySpaces)?e:0)}toBinary(e,t){t=B(t);return this.internalBinaryWrite(e,t.writerFactory(),t).finish()}internalJsonRead(e,t,n){if(null===e||"object"!=typeof e||Array.isArray(e))throw new Error(`Unable to parse message ${this.typeName} from JSON ${O(e)}.`);return n=null!=n?n:this.create(),this.refJsonReader.read(e,n,t),n}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,r){r=null!=r?r:this.create();return this.refBinReader.read(e,r,n,t),r}};switch(H){case"application/x-protobuf":break;case"application/grpc":case"application/grpc+proto":!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).pako={})}(this,(function(e){"use strict";function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const n=256,r=286,i=30,a=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),o=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new Array(576);t(f);const u=new Array(60);t(u);const c=new Array(512);t(c);const d=new Array(256);t(d);const p=new Array(29);t(p);const m=new Array(i);function w(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let g,b,_;function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(m);const k=e=>e<256?c[e]:c[256+(e>>>7)],v=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},T=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,v(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},N=(e,t,n)=>{T(e,n[2*t],n[2*t+1])},E=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},B=(e,t,n)=>{const r=new Array(16);let i,s,o=0;for(i=1;i<=a;i++)r[i]=o=o+n[i-1]<<1;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=E(r[t]++,t))}},U=e=>{let t;for(t=0;t<r;t++)e.dyn_ltree[2*t]=0;for(t=0;t<i;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},x=e=>{e.bi_valid>8?v(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},I=(e,t,n,r)=>{const i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},R=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&I(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!I(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},O=(e,t,r)=>{let i,a,l,h,f=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*f]<<8|e.pending_buf[e.d_buf+2*f+1],a=e.pending_buf[e.l_buf+f],f++,0===i?N(e,a,t):(l=d[a],N(e,l+n+1,t),h=s[l],0!==h&&(a-=p[l],T(e,a,h)),i--,l=k(i),N(e,l,r),h=o[l],0!==h&&(i-=m[l],T(e,i,h)))}while(f<e.last_lit);N(e,256,t)},A=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,l,h,f=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=f=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)h=e.heap[++e.heap_len]=f<2?++f:0,n[2*h]=1,e.depth[h]=0,e.opt_len--,i&&(e.static_len-=r[2*h+1]);for(t.max_code=f,o=e.heap_len>>1;o>=1;o--)R(e,n,o);h=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],R(e,n,1),l=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=l,n[2*h]=n[2*o]+n[2*l],e.depth[h]=(e.depth[o]>=e.depth[l]?e.depth[o]:e.depth[l])+1,n[2*o+1]=n[2*l+1]=h,e.heap[1]=h++,R(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,h=t.stat_desc.max_length;let f,u,c,d,p,m,w=0;for(d=0;d<=a;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,f=e.heap_max+1;f<573;f++)u=e.heap[f],d=n[2*n[2*u+1]+1]+1,d>h&&(d=h,w++),n[2*u+1]=d,u>r||(e.bl_count[d]++,p=0,u>=l&&(p=o[u-l]),m=n[2*u],e.opt_len+=m*(d+p),s&&(e.static_len+=m*(i[2*u+1]+p)));if(0!==w){do{for(d=h-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[h]--,w-=2}while(w>0);for(d=h;0!==d;d--)for(u=e.bl_count[d];0!==u;)c=e.heap[--f],c>r||(n[2*c+1]!==d&&(e.opt_len+=(d-n[2*c+1])*n[2*c],n[2*c+1]=d),u--)}})(e,t),B(n,f,e.bl_count)},S=(e,t,n)=>{let r,i,a=-1,s=t[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++o<l&&i===s||(o<h?e.bl_tree[2*i]+=o:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=i,0===s?(l=138,h=3):i===s?(l=6,h=3):(l=7,h=4))},D=(e,t,n)=>{let r,i,a=-1,s=t[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++o<l&&i===s)){if(o<h)do{N(e,i,e.bl_tree)}while(0!=--o);else 0!==i?(i!==a&&(N(e,i,e.bl_tree),o--),N(e,16,e.bl_tree),T(e,o-3,2)):o<=10?(N(e,17,e.bl_tree),T(e,o-3,3)):(N(e,18,e.bl_tree),T(e,o-11,7));o=0,a=i,0===s?(l=138,h=3):i===s?(l=6,h=3):(l=7,h=4)}};let L=!1;const F=(e,t,n,r)=>{T(e,0+(r?1:0),3),((e,t,n,r)=>{x(e),r&&(v(e,n),v(e,~n)),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n,!0)};var j={_tr_init:e=>{L||((()=>{let e,t,n,h,y;const k=new Array(16);for(n=0,h=0;h<28;h++)for(p[h]=n,e=0;e<1<<s[h];e++)d[n++]=h;for(d[n-1]=h,y=0,h=0;h<16;h++)for(m[h]=y,e=0;e<1<<o[h];e++)c[y++]=h;for(y>>=7;h<i;h++)for(m[h]=y<<7,e=0;e<1<<o[h]-7;e++)c[256+y++]=h;for(t=0;t<=a;t++)k[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,k[8]++;for(;e<=255;)f[2*e+1]=9,e++,k[9]++;for(;e<=279;)f[2*e+1]=7,e++,k[7]++;for(;e<=287;)f[2*e+1]=8,e++,k[8]++;for(B(f,287,k),e=0;e<i;e++)u[2*e+1]=5,u[2*e]=E(e,5);g=new w(f,s,257,r,a),b=new w(u,o,0,i,a),_=new w(new Array(0),l,0,19,7)})(),L=!0),e.l_desc=new y(e.dyn_ltree,g),e.d_desc=new y(e.dyn_dtree,b),e.bl_desc=new y(e.bl_tree,_),e.bi_buf=0,e.bi_valid=0,U(e)},_tr_stored_block:F,_tr_flush_block:(e,t,r,i)=>{let a,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<n;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),A(e,e.l_desc),A(e,e.d_desc),o=(e=>{let t;for(S(e,e.dyn_ltree,e.l_desc.max_code),S(e,e.dyn_dtree,e.d_desc.max_code),A(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=r+5,r+4<=a&&-1!==t?F(e,t,r,i):4===e.strategy||s===a?(T(e,2+(i?1:0),3),O(e,f,u)):(T(e,4+(i?1:0),3),((e,t,n,r)=>{let i;for(T(e,t-257,5),T(e,n-1,5),T(e,r-4,4),i=0;i<r;i++)T(e,e.bl_tree[2*h[i]+1],3);D(e,e.dyn_ltree,t-1),D(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),O(e,e.dyn_ltree,e.dyn_dtree)),U(e),i&&x(e)},_tr_tally:(e,t,r)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(d[r]+n+1)]++,e.dyn_dtree[2*k(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{T(e,2,3),N(e,256,f),(e=>{16===e.bi_valid?(v(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var z=(e,t,n,r)=>{let i=65535&e|0,a=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{i=i+t[r++]|0,a=a+i|0}while(--s);i%=65521,a%=65521}return i|a<<16|0};const C=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var $=(e,t,n,r)=>{const i=C,a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^i[255&(e^t[n])];return-1^e},V={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Z={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:W,_tr_stored_block:P,_tr_flush_block:M,_tr_tally:K,_tr_align:J}=j,{Z_NO_FLUSH:X,Z_PARTIAL_FLUSH:G,Z_FULL_FLUSH:H,Z_FINISH:Y,Z_BLOCK:q,Z_OK:Q,Z_STREAM_END:ee,Z_STREAM_ERROR:te,Z_DATA_ERROR:ne,Z_BUF_ERROR:re,Z_DEFAULT_COMPRESSION:ie,Z_FILTERED:ae,Z_HUFFMAN_ONLY:se,Z_RLE:oe,Z_FIXED:le,Z_DEFAULT_STRATEGY:he,Z_UNKNOWN:fe,Z_DEFLATED:ue}=Z,ce=258,de=262,pe=103,me=113,we=666,ge=(e,t)=>(e.msg=V[t],t),be=e=>(e<<1)-(e>4?9:0),_e=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let ye=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const ke=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},ve=(e,t)=>{M(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ke(e.strm)},Te=(e,t)=>{e.pending_buf[e.pending++]=t},Ne=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ee=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=z(e.adler,t,i,n):2===e.state.wrap&&(e.adler=$(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Be=(e,t)=>{let n,r,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-de?e.strstart-(e.w_size-de):0,h=e.window,f=e.w_mask,u=e.prev,c=e.strstart+ce;let d=h[a+s-1],p=h[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,h[n+s]===p&&h[n+s-1]===d&&h[n]===h[a]&&h[++n]===h[a+1]){a+=2,n++;do{}while(h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&a<c);if(r=ce-(c-a),a=c-ce,r>s){if(e.match_start=t,s=r,r>=o)break;d=h[a+s-1],p=h[a+s]}}}while((t=u[t&f])>l&&0!=--i);return s<=e.lookahead?s:e.lookahead},Ue=e=>{const t=e.w_size;let n,r,i,a,s;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-de)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do{i=e.head[--n],e.head[n]=i>=t?i-t:0}while(--r);r=t,n=r;do{i=e.prev[--n],e.prev[n]=i>=t?i-t:0}while(--r);a+=t}if(0===e.strm.avail_in)break;if(r=Ee(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=r,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=ye(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=ye(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<de&&0!==e.strm.avail_in)},xe=(e,t)=>{let n,r;for(;;){if(e.lookahead<de){if(Ue(e),e.lookahead<de&&t===X)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-de&&(e.match_length=Be(e,n)),e.match_length>=3)if(r=K(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ye(e,e.ins_h,e.window[e.strstart+1]);else r=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2},Ie=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<de){if(Ue(e),e.lookahead<de&&t===X)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-de&&(e.match_length=Be(e,n),e.match_length<=5&&(e.strategy===ae||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=K(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(ve(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=K(e,0,e.window[e.strstart-1]),r&&ve(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=K(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2};function Re(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Oe=[new Re(0,0,0,0,((e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ue(e),0===e.lookahead&&t===X)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,ve(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-de&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(ve(e,!1),e.strm.avail_out),1)})),new Re(4,4,8,4,xe),new Re(4,5,16,8,xe),new Re(4,6,32,32,xe),new Re(4,4,16,16,Ie),new Re(8,16,32,32,Ie),new Re(8,16,128,128,Ie),new Re(8,32,128,256,Ie),new Re(32,128,258,1024,Ie),new Re(32,258,258,4096,Ie)];function Ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ue,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),_e(this.dyn_ltree),_e(this.dyn_dtree),_e(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),_e(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),_e(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Se=e=>{if(!e||!e.state)return ge(e,te);e.total_in=e.total_out=0,e.data_type=fe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:me,e.adler=2===t.wrap?0:1,t.last_flush=X,W(t),Q},De=e=>{const t=Se(e);var n;return t===Q&&((n=e.state).window_size=2*n.w_size,_e(n.head),n.max_lazy_match=Oe[n.level].max_lazy,n.good_match=Oe[n.level].good_length,n.nice_match=Oe[n.level].nice_length,n.max_chain_length=Oe[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Le=(e,t,n,r,i,a)=>{if(!e)return te;let s=1;if(t===ie&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==ue||r<8||r>15||t<0||t>9||a<0||a>le)return ge(e,te);8===r&&(r=9);const o=new Ae;return e.state=o,o.strm=e,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=a,o.method=n,De(e)};var Fe={deflateInit:(e,t)=>Le(e,t,ue,15,8,he),deflateInit2:Le,deflateReset:De,deflateResetKeep:Se,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?te:(e.state.gzhead=t,Q):te,deflate:(e,t)=>{let n,r;if(!e||!e.state||t>q||t<0)return e?ge(e,te):te;const i=e.state;if(!e.output||!e.input&&0!==e.avail_in||i.status===we&&t!==Y)return ge(e,0===e.avail_out?re:te);i.strm=e;const a=i.last_flush;if(i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,Te(i,31),Te(i,139),Te(i,8),i.gzhead?(Te(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Te(i,255&i.gzhead.time),Te(i,i.gzhead.time>>8&255),Te(i,i.gzhead.time>>16&255),Te(i,i.gzhead.time>>24&255),Te(i,9===i.level?2:i.strategy>=se||i.level<2?4:0),Te(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Te(i,255&i.gzhead.extra.length),Te(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=$(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(Te(i,0),Te(i,0),Te(i,0),Te(i,0),Te(i,0),Te(i,9===i.level?2:i.strategy>=se||i.level<2?4:0),Te(i,3),i.status=me);else{let t=ue+(i.w_bits-8<<4)<<8,n=-1;n=i.strategy>=se||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=n<<6,0!==i.strstart&&(t|=32),t+=31-t%31,i.status=me,Ne(i,t),0!==i.strstart&&(Ne(i,e.adler>>>16),Ne(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(e.adler=$(e.adler,i.pending_buf,i.pending-n,n)),ke(e),n=i.pending,i.pending!==i.pending_buf_size));)Te(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=$(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=$(e.adler,i.pending_buf,i.pending-n,n)),ke(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Te(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=$(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=$(e.adler,i.pending_buf,i.pending-n,n)),ke(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Te(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=$(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=pe)}else i.status=pe;if(i.status===pe&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ke(e),i.pending+2<=i.pending_buf_size&&(Te(i,255&e.adler),Te(i,e.adler>>8&255),e.adler=0,i.status=me)):i.status=me),0!==i.pending){if(ke(e),0===e.avail_out)return i.last_flush=-1,Q}else if(0===e.avail_in&&be(t)<=be(a)&&t!==Y)return ge(e,re);if(i.status===we&&0!==e.avail_in)return ge(e,re);if(0!==e.avail_in||0!==i.lookahead||t!==X&&i.status!==we){let n=i.strategy===se?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Ue(e),0===e.lookahead)){if(t===X)return 1;break}if(e.match_length=0,n=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===oe?((e,t)=>{let n,r,i,a;const s=e.window;for(;;){if(e.lookahead<=ce){if(Ue(e),e.lookahead<=ce&&t===X)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){a=e.strstart+ce;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=ce-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=K(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2})(i,t):Oe[i.level].func(i,t);if(3!==n&&4!==n||(i.status=we),1===n||3===n)return 0===e.avail_out&&(i.last_flush=-1),Q;if(2===n&&(t===G?J(i):t!==q&&(P(i,0,0,!1),t===H&&(_e(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),ke(e),0===e.avail_out))return i.last_flush=-1,Q}return t!==Y?Q:i.wrap<=0?ee:(2===i.wrap?(Te(i,255&e.adler),Te(i,e.adler>>8&255),Te(i,e.adler>>16&255),Te(i,e.adler>>24&255),Te(i,255&e.total_in),Te(i,e.total_in>>8&255),Te(i,e.total_in>>16&255),Te(i,e.total_in>>24&255)):(Ne(i,e.adler>>>16),Ne(i,65535&e.adler)),ke(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?Q:ee)},deflateEnd:e=>{if(!e||!e.state)return te;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==pe&&t!==me&&t!==we?ge(e,te):(e.state=null,t===me?ge(e,ne):Q)},deflateSetDictionary:(e,t)=>{let n=t.length;if(!e||!e.state)return te;const r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return te;if(1===i&&(e.adler=z(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(_e(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const a=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ue(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=ye(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,Ue(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=o,e.avail_in=a,r.wrap=i,Q},deflateInfo:"pako deflate (from Nodeca project)"};const je=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ze=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)je(n,t)&&(e[t]=n[t])}}return e},Ce=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n};let $e=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){$e=!1}const Ve=new Uint8Array(256);for(let e=0;e<256;e++)Ve[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ve[254]=Ve[254]=1;var Ze=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,a,s=e.length,o=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),a=0,i=0;a<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},We=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const a=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){a[i++]=t;continue}let s=Ve[t];if(s>4)a[i++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?a[i++]=65533:t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&$e)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(a,i)},Pe=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Ve[e[n]]>t?n:t};var Me=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ke=Object.prototype.toString,{Z_NO_FLUSH:Je,Z_SYNC_FLUSH:Xe,Z_FULL_FLUSH:Ge,Z_FINISH:He,Z_OK:Ye,Z_STREAM_END:qe,Z_DEFAULT_COMPRESSION:Qe,Z_DEFAULT_STRATEGY:et,Z_DEFLATED:tt}=Z;function nt(e){this.options=ze({level:Qe,method:tt,chunkSize:16384,windowBits:15,memLevel:8,strategy:et},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Me,this.strm.avail_out=0;let n=Fe.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Ye)throw new Error(V[n]);if(t.header&&Fe.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Ze(t.dictionary):"[object ArrayBuffer]"===Ke.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Fe.deflateSetDictionary(this.strm,e),n!==Ye)throw new Error(V[n]);this._dict_set=!0}}function rt(e,t){const n=new nt(t);if(n.push(e,!0),n.err)throw n.msg||V[n.err];return n.result}nt.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?He:Je,"string"==typeof e?n.input=Ze(e):"[object ArrayBuffer]"===Ke.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===Xe||a===Ge)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Fe.deflate(n,a),i===qe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Fe.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Ye;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},nt.prototype.onData=function(e){this.chunks.push(e)},nt.prototype.onEnd=function(e){e===Ye&&(this.result=Ce(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var it={Deflate:nt,deflate:rt,deflateRaw:function(e,t){return(t=t||{}).raw=!0,rt(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,rt(e,t)},constants:Z};var at=function(e,t){let n,r,i,a,s,o,l,h,f,u,c,d,p,m,w,g,b,_,y,k,v,T,N,E;const B=e.state;n=e.next_in,N=e.input,r=n+(e.avail_in-5),i=e.next_out,E=e.output,a=i-(t-e.avail_out),s=i+(e.avail_out-257),o=B.dmax,l=B.wsize,h=B.whave,f=B.wnext,u=B.window,c=B.hold,d=B.bits,p=B.lencode,m=B.distcode,w=(1<<B.lenbits)-1,g=(1<<B.distbits)-1;e:do{d<15&&(c+=N[n++]<<d,d+=8,c+=N[n++]<<d,d+=8),b=p[c&w];t:for(;;){if(_=b>>>24,c>>>=_,d-=_,_=b>>>16&255,0===_)E[i++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=p[(65535&b)+(c&(1<<_)-1)];continue t}if(32&_){B.mode=12;break e}e.msg="invalid literal/length code",B.mode=30;break e}y=65535&b,_&=15,_&&(d<_&&(c+=N[n++]<<d,d+=8),y+=c&(1<<_)-1,c>>>=_,d-=_),d<15&&(c+=N[n++]<<d,d+=8,c+=N[n++]<<d,d+=8),b=m[c&g];n:for(;;){if(_=b>>>24,c>>>=_,d-=_,_=b>>>16&255,!(16&_)){if(0==(64&_)){b=m[(65535&b)+(c&(1<<_)-1)];continue n}e.msg="invalid distance code",B.mode=30;break e}if(k=65535&b,_&=15,d<_&&(c+=N[n++]<<d,d+=8,d<_&&(c+=N[n++]<<d,d+=8)),k+=c&(1<<_)-1,k>o){e.msg="invalid distance too far back",B.mode=30;break e}if(c>>>=_,d-=_,_=i-a,k>_){if(_=k-_,_>h&&B.sane){e.msg="invalid distance too far back",B.mode=30;break e}if(v=0,T=u,0===f){if(v+=l-_,_<y){y-=_;do{E[i++]=u[v++]}while(--_);v=i-k,T=E}}else if(f<_){if(v+=l+f-_,_-=f,_<y){y-=_;do{E[i++]=u[v++]}while(--_);if(v=0,f<y){_=f,y-=_;do{E[i++]=u[v++]}while(--_);v=i-k,T=E}}}else if(v+=f-_,_<y){y-=_;do{E[i++]=u[v++]}while(--_);v=i-k,T=E}for(;y>2;)E[i++]=T[v++],E[i++]=T[v++],E[i++]=T[v++],y-=3;y&&(E[i++]=T[v++],y>1&&(E[i++]=T[v++]))}else{v=i-k;do{E[i++]=E[v++],E[i++]=E[v++],E[i++]=E[v++],y-=3}while(y>2);y&&(E[i++]=E[v++],y>1&&(E[i++]=E[v++]))}break}}break}}while(n<r&&i<s);y=d>>3,n-=y,d-=y<<3,c&=(1<<d)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<s?s-i+257:257-(i-s),B.hold=c,B.bits=d};const st=15,ot=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ht=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ft=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ut=(e,t,n,r,i,a,s,o)=>{const l=o.bits;let h,f,u,c,d,p,m=0,w=0,g=0,b=0,_=0,y=0,k=0,v=0,T=0,N=0,E=null,B=0;const U=new Uint16Array(16),x=new Uint16Array(16);let I,R,O,A=null,S=0;for(m=0;m<=st;m++)U[m]=0;for(w=0;w<r;w++)U[t[n+w]]++;for(_=l,b=st;b>=1&&0===U[b];b--);if(_>b&&(_=b),0===b)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(g=1;g<b&&0===U[g];g++);for(_<g&&(_=g),v=1,m=1;m<=st;m++)if(v<<=1,v-=U[m],v<0)return-1;if(v>0&&(0===e||1!==b))return-1;for(x[1]=0,m=1;m<st;m++)x[m+1]=x[m]+U[m];for(w=0;w<r;w++)0!==t[n+w]&&(s[x[t[n+w]]++]=w);if(0===e?(E=A=s,p=19):1===e?(E=ot,B-=257,A=lt,S-=257,p=256):(E=ht,A=ft,p=-1),N=0,w=0,m=g,d=a,y=_,k=0,u=-1,T=1<<_,c=T-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){I=m-k,s[w]<p?(R=0,O=s[w]):s[w]>p?(R=A[S+s[w]],O=E[B+s[w]]):(R=96,O=0),h=1<<m-k,f=1<<y,g=f;do{f-=h,i[d+(N>>k)+f]=I<<24|R<<16|O|0}while(0!==f);for(h=1<<m-1;N&h;)h>>=1;if(0!==h?(N&=h-1,N+=h):N=0,w++,0==--U[m]){if(m===b)break;m=t[n+s[w]]}if(m>_&&(N&c)!==u){for(0===k&&(k=_),d+=g,y=m-k,v=1<<y;y+k<b&&(v-=U[y+k],!(v<=0));)y++,v<<=1;if(T+=1<<y,1===e&&T>852||2===e&&T>592)return 1;u=N&c,i[u]=_<<24|y<<16|d-a|0}}return 0!==N&&(i[d+N]=m-k<<24|64<<16|0),o.bits=_,0};const{Z_FINISH:ct,Z_BLOCK:dt,Z_TREES:pt,Z_OK:mt,Z_STREAM_END:wt,Z_NEED_DICT:gt,Z_STREAM_ERROR:bt,Z_DATA_ERROR:_t,Z_MEM_ERROR:yt,Z_BUF_ERROR:kt,Z_DEFLATED:vt}=Z,Tt=12,Nt=30,Et=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Bt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ut=e=>{if(!e||!e.state)return bt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,mt},xt=e=>{if(!e||!e.state)return bt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Ut(e)},It=(e,t)=>{let n;if(!e||!e.state)return bt;const r=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?bt:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,xt(e))},Rt=(e,t)=>{if(!e)return bt;const n=new Bt;e.state=n,n.window=null;const r=It(e,t);return r!==mt&&(e.state=null),r};let Ot,At,St=!0;const Dt=e=>{if(St){Ot=new Int32Array(512),At=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ut(1,e.lens,0,288,Ot,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ut(2,e.lens,0,32,At,0,e.work,{bits:5}),St=!1}e.lencode=Ot,e.lenbits=9,e.distcode=At,e.distbits=5},Lt=(e,t,n,r)=>{let i;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Ft={inflateReset:xt,inflateReset2:It,inflateResetKeep:Ut,inflateInit:e=>Rt(e,15),inflateInit2:Rt,inflate:(e,t)=>{let n,r,i,a,s,o,l,h,f,u,c,d,p,m,w,g,b,_,y,k,v,T,N=0;const E=new Uint8Array(4);let B,U;const x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return bt;n=e.state,n.mode===Tt&&(n.mode=13),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,h=n.hold,f=n.bits,u=o,c=l,T=mt;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;f<16;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}if(2&n.wrap&&35615===h){n.check=0,E[0]=255&h,E[1]=h>>>8&255,n.check=$(n.check,E,2,0),h=0,f=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=Nt;break}if((15&h)!==vt){e.msg="unknown compression method",n.mode=Nt;break}if(h>>>=4,f-=4,v=8+(15&h),0===n.wbits)n.wbits=v;else if(v>n.wbits){e.msg="invalid window size",n.mode=Nt;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&h?10:Tt,h=0,f=0;break;case 2:for(;f<16;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}if(n.flags=h,(255&n.flags)!==vt){e.msg="unknown compression method",n.mode=Nt;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Nt;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(E[0]=255&h,E[1]=h>>>8&255,n.check=$(n.check,E,2,0)),h=0,f=0,n.mode=3;case 3:for(;f<32;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}n.head&&(n.head.time=h),512&n.flags&&(E[0]=255&h,E[1]=h>>>8&255,E[2]=h>>>16&255,E[3]=h>>>24&255,n.check=$(n.check,E,4,0)),h=0,f=0,n.mode=4;case 4:for(;f<16;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(E[0]=255&h,E[1]=h>>>8&255,n.check=$(n.check,E,2,0)),h=0,f=0,n.mode=5;case 5:if(1024&n.flags){for(;f<16;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(E[0]=255&h,E[1]=h>>>8&255,n.check=$(n.check,E,2,0)),h=0,f=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(d=n.length,d>o&&(d=o),d&&(n.head&&(v=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+d),v)),512&n.flags&&(n.check=$(n.check,r,d,a)),o-=d,a+=d,n.length-=d),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break e;d=0;do{v=r[a+d++],n.head&&v&&n.length<65536&&(n.head.name+=String.fromCharCode(v))}while(v&&d<o);if(512&n.flags&&(n.check=$(n.check,r,d,a)),o-=d,a+=d,v)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break e;d=0;do{v=r[a+d++],n.head&&v&&n.length<65536&&(n.head.comment+=String.fromCharCode(v))}while(v&&d<o);if(512&n.flags&&(n.check=$(n.check,r,d,a)),o-=d,a+=d,v)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;f<16;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Nt;break}h=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Tt;break;case 10:for(;f<32;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}e.adler=n.check=Et(h),h=0,f=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=h,n.bits=f,gt;e.adler=n.check=1,n.mode=Tt;case Tt:if(t===dt||t===pt)break e;case 13:if(n.last){h>>>=7&f,f-=7&f,n.mode=27;break}for(;f<3;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}switch(n.last=1&h,h>>>=1,f-=1,3&h){case 0:n.mode=14;break;case 1:if(Dt(n),n.mode=20,t===pt){h>>>=2,f-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=Nt}h>>>=2,f-=2;break;case 14:for(h>>>=7&f,f-=7&f;f<32;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Nt;break}if(n.length=65535&h,h=0,f=0,n.mode=15,t===pt)break e;case 15:n.mode=16;case 16:if(d=n.length,d){if(d>o&&(d=o),d>l&&(d=l),0===d)break e;i.set(r.subarray(a,a+d),s),o-=d,a+=d,l-=d,s+=d,n.length-=d;break}n.mode=Tt;break;case 17:for(;f<14;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}if(n.nlen=257+(31&h),h>>>=5,f-=5,n.ndist=1+(31&h),h>>>=5,f-=5,n.ncode=4+(15&h),h>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Nt;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;f<3;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}n.lens[x[n.have++]]=7&h,h>>>=3,f-=3}for(;n.have<19;)n.lens[x[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},T=ut(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,T){e.msg="invalid code lengths set",n.mode=Nt;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;N=n.lencode[h&(1<<n.lenbits)-1],w=N>>>24,g=N>>>16&255,b=65535&N,!(w<=f);){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}if(b<16)h>>>=w,f-=w,n.lens[n.have++]=b;else{if(16===b){for(U=w+2;f<U;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}if(h>>>=w,f-=w,0===n.have){e.msg="invalid bit length repeat",n.mode=Nt;break}v=n.lens[n.have-1],d=3+(3&h),h>>>=2,f-=2}else if(17===b){for(U=w+3;f<U;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}h>>>=w,f-=w,v=0,d=3+(7&h),h>>>=3,f-=3}else{for(U=w+7;f<U;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}h>>>=w,f-=w,v=0,d=11+(127&h),h>>>=7,f-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Nt;break}for(;d--;)n.lens[n.have++]=v}}if(n.mode===Nt)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Nt;break}if(n.lenbits=9,B={bits:n.lenbits},T=ut(1,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,T){e.msg="invalid literal/lengths set",n.mode=Nt;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},T=ut(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,T){e.msg="invalid distances set",n.mode=Nt;break}if(n.mode=20,t===pt)break e;case 20:n.mode=21;case 21:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=h,n.bits=f,at(e,c),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,h=n.hold,f=n.bits,n.mode===Tt&&(n.back=-1);break}for(n.back=0;N=n.lencode[h&(1<<n.lenbits)-1],w=N>>>24,g=N>>>16&255,b=65535&N,!(w<=f);){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}if(g&&0==(240&g)){for(_=w,y=g,k=b;N=n.lencode[k+((h&(1<<_+y)-1)>>_)],w=N>>>24,g=N>>>16&255,b=65535&N,!(_+w<=f);){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}h>>>=_,f-=_,n.back+=_}if(h>>>=w,f-=w,n.back+=w,n.length=b,0===g){n.mode=26;break}if(32&g){n.back=-1,n.mode=Tt;break}if(64&g){e.msg="invalid literal/length code",n.mode=Nt;break}n.extra=15&g,n.mode=22;case 22:if(n.extra){for(U=n.extra;f<U;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;N=n.distcode[h&(1<<n.distbits)-1],w=N>>>24,g=N>>>16&255,b=65535&N,!(w<=f);){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}if(0==(240&g)){for(_=w,y=g,k=b;N=n.distcode[k+((h&(1<<_+y)-1)>>_)],w=N>>>24,g=N>>>16&255,b=65535&N,!(_+w<=f);){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}h>>>=_,f-=_,n.back+=_}if(h>>>=w,f-=w,n.back+=w,64&g){e.msg="invalid distance code",n.mode=Nt;break}n.offset=b,n.extra=15&g,n.mode=24;case 24:if(n.extra){for(U=n.extra;f<U;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Nt;break}n.mode=25;case 25:if(0===l)break e;if(d=c-l,n.offset>d){if(d=n.offset-d,d>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Nt;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),m=n.window}else m=i,p=s-n.offset,d=n.length;d>l&&(d=l),l-=d,n.length-=d;do{i[s++]=m[p++]}while(--d);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;i[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;f<32;){if(0===o)break e;o--,h|=r[a++]<<f,f+=8}if(c-=l,e.total_out+=c,n.total+=c,c&&(e.adler=n.check=n.flags?$(n.check,i,c,s-c):z(n.check,i,c,s-c)),c=l,(n.flags?h:Et(h))!==n.check){e.msg="incorrect data check",n.mode=Nt;break}h=0,f=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;f<32;){if(0===o)break e;o--,h+=r[a++]<<f,f+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Nt;break}h=0,f=0}n.mode=29;case 29:T=wt;break e;case Nt:T=_t;break e;case 31:return yt;case 32:default:return bt}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=h,n.bits=f,(n.wsize||c!==e.avail_out&&n.mode<Nt&&(n.mode<27||t!==ct))&&Lt(e,e.output,e.next_out,c-e.avail_out),u-=e.avail_in,c-=e.avail_out,e.total_in+=u,e.total_out+=c,n.total+=c,n.wrap&&c&&(e.adler=n.check=n.flags?$(n.check,i,c,e.next_out-c):z(n.check,i,c,e.next_out-c)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Tt?128:0)+(20===n.mode||15===n.mode?256:0),(0===u&&0===c||t===ct)&&T===mt&&(T=kt),T},inflateEnd:e=>{if(!e||!e.state)return bt;let t=e.state;return t.window&&(t.window=null),e.state=null,mt},inflateGetHeader:(e,t)=>{if(!e||!e.state)return bt;const n=e.state;return 0==(2&n.wrap)?bt:(n.head=t,t.done=!1,mt)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,a;return e&&e.state?(r=e.state,0!==r.wrap&&11!==r.mode?bt:11===r.mode&&(i=1,i=z(i,t,n,0),i!==r.check)?_t:(a=Lt(e,t,n,n),a?(r.mode=31,yt):(r.havedict=1,mt))):bt},inflateInfo:"pako inflate (from Nodeca project)"};var jt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const zt=Object.prototype.toString,{Z_NO_FLUSH:Ct,Z_FINISH:$t,Z_OK:Vt,Z_STREAM_END:Zt,Z_NEED_DICT:Wt,Z_STREAM_ERROR:Pt,Z_DATA_ERROR:Mt,Z_MEM_ERROR:Kt}=Z;function Jt(e){this.options=ze({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Me,this.strm.avail_out=0;let n=Ft.inflateInit2(this.strm,t.windowBits);if(n!==Vt)throw new Error(V[n]);if(this.header=new jt,Ft.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Ze(t.dictionary):"[object ArrayBuffer]"===zt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ft.inflateSetDictionary(this.strm,t.dictionary),n!==Vt)))throw new Error(V[n])}function Xt(e,t){const n=new Jt(t);if(n.push(e),n.err)throw n.msg||V[n.err];return n.result}Jt.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=t===~~t?t:!0===t?$t:Ct,"[object ArrayBuffer]"===zt.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Ft.inflate(n,s),a===Wt&&i&&(a=Ft.inflateSetDictionary(n,i),a===Vt?a=Ft.inflate(n,s):a===Mt&&(a=Wt));n.avail_in>0&&a===Zt&&n.state.wrap>0&&0!==e[n.next_in];)Ft.inflateReset(n),a=Ft.inflate(n,s);switch(a){case Pt:case Mt:case Wt:case Kt:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||a===Zt))if("string"===this.options.to){let e=Pe(n.output,n.next_out),t=n.next_out-e,i=We(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==Vt||0!==o){if(a===Zt)return a=Ft.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Jt.prototype.onData=function(e){this.chunks.push(e)},Jt.prototype.onEnd=function(e){e===Vt&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ce(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Gt={Inflate:Jt,inflate:Xt,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Xt(e,t)},ungzip:Xt,constants:Z};const{Deflate:Ht,deflate:Yt,deflateRaw:qt,gzip:Qt}=it,{Inflate:en,inflate:tn,inflateRaw:nn,ungzip:rn}=Gt;var an=Ht,sn=Yt,on=qt,ln=Qt,hn=en,fn=tn,un=nn,cn=rn,dn=Z,pn={Deflate:an,deflate:sn,deflateRaw:on,gzip:ln,Inflate:hn,inflate:fn,inflateRaw:un,ungzip:cn,constants:dn};e.Deflate=an,e.Inflate=hn,e.constants=dn,e.default=pn,e.deflate=sn,e.deflateRaw=on,e.gzip=ln,e.inflate=fn,e.inflateRaw=un,e.ungzip=cn,Object.defineProperty(e,"__esModule",{value:!0})}));let Re=q.slice(0,5);Y=q.slice(5);switch(Re?.[0]){case 0:break;case 1:Y=pako.ungzip(Y);Re[0]=0;break};switch(J){case"grpc.biliapi.net":case"app.bilibili.com":class Oe extends xe{constructor(){super("google.protobuf.Any",[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}])}pack(e,t){return{typeUrl:this.typeNameToUrl(t.typeName),value:t.toBinary(e)}}unpack(e,t,n){if(!this.contains(e,t))throw new Error("Cannot unpack google.protobuf.Any with typeUrl '"+e.typeUrl+"' as "+t.typeName+".");return t.fromBinary(e.value,n)}contains(e,t){if(!e.typeUrl.length)return false;let n=typeof t=="string"?t:t.typeName;let r=this.typeUrlToName(e.typeUrl);return n===r}internalJsonWrite(e,t){if(e.typeUrl==="")return{};let n=this.typeUrlToName(e.typeUrl);let r=$(t);let i=r.typeRegistry?.find((e=>e.typeName===n));if(!i)throw new globalThis.Error("Unable to convert google.protobuf.Any with typeUrl '"+e.typeUrl+"' to JSON. The specified type "+n+" is not available in the type registry.");let a=i.fromBinary(e.value,{readUnknownField:false});let s=i.internalJsonWrite(a,r);if(n.startsWith("google.protobuf.")||!A(s))s={value:s};s["@type"]=e.typeUrl;return s}internalJsonRead(e,t,n){if(!A(e))throw new globalThis.Error("Unable to parse google.protobuf.Any from JSON "+O(e)+".");if(typeof e["@type"]!="string"||e["@type"]=="")return this.create();let r=this.typeUrlToName(e["@type"]);let i=t?.typeRegistry?.find((e=>e.typeName==r));if(!i)throw new globalThis.Error("Unable to parse google.protobuf.Any from JSON. The specified type "+r+" is not available in the type registry.");let a;if(r.startsWith("google.protobuf.")&&e.hasOwnProperty("value"))a=i.fromJson(e["value"],t);else{let n=Object.assign({},e);delete n["@type"];a=i.fromJson(n,t)}if(n===undefined)n=this.create();n.typeUrl=e["@type"];n.value=i.toBinary(a);return n}typeNameToUrl(e){if(!e.length)throw new Error("invalid type name: "+e);return"type.googleapis.com/"+e}typeUrlToName(e){if(!e.length)throw new Error("invalid type url: "+e);let t=e.lastIndexOf("/");let n=t>0?e.substring(t+1):e;if(!n.length)throw new Error("invalid type url: "+e);return n}create(e){const t={typeUrl:"",value:new Uint8Array(0)};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.typeUrl=t.string();break;case 2:a.value=t.bytes();break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.typeUrl!=="")r.tag(1,t.LengthDelimited).string(n.typeUrl);if(n.value.length)r.tag(2,t.LengthDelimited).bytes(n.value);let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const Ae=new Oe;class Se extends xe{constructor(){super("CM",[{no:1,name:"source_content",kind:"message",T:()=>Ae}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.sourceContent=Ae.internalBinaryRead(t,t.uint32(),r,a.sourceContent);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.sourceContent)Ae.internalBinaryWrite(n.sourceContent,r.tag(1,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const De=new Se;switch(G?.[0]){case"bilibili.app.playurl.v1.PlayURL":switch(G?.[1]){case"PlayView":class ut extends xe{constructor(){super("PlayViewReply",[{no:5,name:"play_arc",kind:"message",T:()=>pt}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 5:a.playArc=pt.internalBinaryRead(t,t.uint32(),r,a.playArc);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.playArc)pt.internalBinaryWrite(n.playArc,r.tag(5,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const ct=new ut;class dt extends xe{constructor(){super("PlayArcConf",[{no:1,name:"background_play_conf",kind:"message",T:()=>wt}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.backgroundPlayConf=wt.internalBinaryRead(t,t.uint32(),r,a.backgroundPlayConf);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.backgroundPlayConf)wt.internalBinaryWrite(n.backgroundPlayConf,r.tag(1,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const pt=new dt;class mt extends xe{constructor(){super("ArcConf",[{no:1,name:"is_support",kind:"scalar",T:8},{no:2,name:"disabled",kind:"scalar",T:8},{no:3,name:"extra_content",kind:"message",T:()=>bt}])}create(e){const t={isSupport:false,disabled:false};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.isSupport=t.bool();break;case 2:a.disabled=t.bool();break;case 3:a.extraContent=bt.internalBinaryRead(t,t.uint32(),r,a.extraContent);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.isSupport!==false)r.tag(1,t.Varint).bool(n.isSupport);if(n.disabled!==false)r.tag(2,t.Varint).bool(n.disabled);if(n.extraContent)bt.internalBinaryWrite(n.extraContent,r.tag(3,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const wt=new mt;class gt extends xe{constructor(){super("ExtraContent",[{no:1,name:"disabled_reason",kind:"scalar",T:9},{no:2,name:"disabled_code",kind:"scalar",T:3,L:0}])}create(e){const t={disabledReason:"",disabledCode:0n};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.disabledReason=t.string();break;case 2:a.disabledCode=t.int64().toBigInt();break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.disabledReason!=="")r.tag(1,t.LengthDelimited).string(n.disabledReason);if(n.disabledCode!==0n)r.tag(2,t.Varint).int64(n.disabledCode);let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const bt=new gt;let _t=ct.fromBinary(Y);const yt=_t.playArc?.backgroundPlayConf;if(yt&&(!yt.isSupport||yt.disabled)){_t.playArc.backgroundPlayConf.isSupport=true;_t.playArc.backgroundPlayConf.disabled=false;_t.playArc.backgroundPlayConf.extraContent=null}else{}Y=ct.toBinary(_t);break;case"PlayConf":break};break;case"bilibili.app.dynamic.v2.Dynamic":var M;(function(e){e[e["dyn_none"]=0]="dyn_none";e[e["ad"]=15]="ad"})(M||(M={}));class Le extends xe{constructor(){super("DynAllReply",[{no:1,name:"dynamic_list",kind:"message",T:()=>$e},{no:2,name:"up_list",kind:"message",T:()=>Ze},{no:3,name:"topic_list",kind:"message",T:()=>Pe}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.dynamicList=$e.internalBinaryRead(t,t.uint32(),r,a.dynamicList);break;case 2:a.upList=Ze.internalBinaryRead(t,t.uint32(),r,a.upList);break;case 3:a.topicList=Pe.internalBinaryRead(t,t.uint32(),r,a.topicList);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.dynamicList)$e.internalBinaryWrite(n.dynamicList,r.tag(1,t.LengthDelimited).fork(),i).join();if(n.upList)Ze.internalBinaryWrite(n.upList,r.tag(2,t.LengthDelimited).fork(),i).join();if(n.topicList)Pe.internalBinaryWrite(n.topicList,r.tag(3,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const Fe=new Le;class je extends xe{constructor(){super("DynVideoReply",[{no:2,name:"video_up_list",kind:"message",T:()=>Ze}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 2:a.videoUpList=Ze.internalBinaryRead(t,t.uint32(),r,a.videoUpList);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.videoUpList)Ze.internalBinaryWrite(n.videoUpList,r.tag(2,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const ze=new je;class Ce extends xe{constructor(){super("DynamicList",[{no:1,name:"list",kind:"message",repeat:1,T:()=>Ke}])}create(e){const t={list:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.list.push(Ke.internalBinaryRead(t,t.uint32(),r));break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){for(let e=0;e<n.list.length;e++)Ke.internalBinaryWrite(n.list[e],r.tag(1,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const $e=new Ce;class Ve extends xe{constructor(){super("CardVideoUpList",[{no:1,name:"title",kind:"scalar",T:9}])}create(e){const t={title:""};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.title=t.string();break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.title!=="")r.tag(1,t.LengthDelimited).string(n.title);let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const Ze=new Ve;class We extends xe{constructor(){super("TopicList",[{no:1,name:"title",kind:"scalar",T:9}])}create(e){const t={title:""};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.title=t.string();break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.title!=="")r.tag(1,t.LengthDelimited).string(n.title);let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const Pe=new We;class Me extends xe{constructor(){super("DynamicItem",[{no:1,name:"card_type",kind:"enum",T:()=>["DynamicType",M]}])}create(e){const t={cardType:0};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.cardType=t.int32();break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.cardType!==0)r.tag(1,t.Varint).int32(n.cardType);let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const Ke=new Me;switch(G?.[1]){case"DynAll":data=Fe.fromBinary(Y);switch(Hot_topics){case true:if(data.topicList){data.topicList=null}break}switch(Most_visited){case true:if(data.upList){data.upList=null;if(debug){console.log("动态综合页最常访问去除")}}break}switch(true){case true:default:if(data.dynamicList?.list?.length){data.dynamicList.list=data.dynamicList.list.filter((e=>{if(e.cardType!==15){return true}return false}))}break}Y=Fe.toBinary(data);break;case"DynVideo":data=ze.fromBinary(Y);switch(true){case true:default:if(data.videoUpList){data.videoUpList=null}break}Y=ze.toBinary(data);break}break;case"bilibili.app.view.v1.View":switch(G?.[1]){case"View":class kt extends xe{constructor(){super("ViewReply",[{no:6,name:"t_icon",kind:"map",K:9,V:{kind:"message",T:()=>xt}},{no:10,name:"relates",kind:"message",repeat:1,T:()=>Rt},{no:30,name:"cms",kind:"message",repeat:1,T:()=>De},{no:31,name:"cm_config",kind:"message",T:()=>Nt},{no:41,name:"cm_ipad",kind:"message",T:()=>Bt}])}create(e){const t={tIcon:{},relates:[],cms:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 6:this.binaryReadMap6(a.tIcon,t,r);break;case 10:a.relates.push(Rt.internalBinaryRead(t,t.uint32(),r));break;case 30:a.cms.push(De.internalBinaryRead(t,t.uint32(),r));break;case 31:a.cmConfig=Nt.internalBinaryRead(t,t.uint32(),r,a.cmConfig);break;case 41:a.cmIpad=Bt.internalBinaryRead(t,t.uint32(),r,a.cmIpad);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}binaryReadMap6(e,t,n){let r=t.uint32(),i=t.pos+r,a,s;while(t.pos<i){let[e,r]=t.tag();switch(e){case 1:a=t.string();break;case 2:s=xt.internalBinaryRead(t,t.uint32(),n);break;default:throw new globalThis.Error("unknown map entry field for field ViewReply.t_icon")}}e[a??""]=s??xt.create()}internalBinaryWrite(n,r,i){for(let e of Object.keys(n.tIcon)){r.tag(6,t.LengthDelimited).fork().tag(1,t.LengthDelimited).string(e);r.tag(2,t.LengthDelimited).fork();xt.internalBinaryWrite(n.tIcon[e],r,i);r.join().join()}for(let e=0;e<n.relates.length;e++)Rt.internalBinaryWrite(n.relates[e],r.tag(10,t.LengthDelimited).fork(),i).join();for(let e=0;e<n.cms.length;e++)De.internalBinaryWrite(n.cms[e],r.tag(30,t.LengthDelimited).fork(),i).join();if(n.cmConfig)Nt.internalBinaryWrite(n.cmConfig,r.tag(31,t.LengthDelimited).fork(),i).join();if(n.cmIpad)Bt.internalBinaryWrite(n.cmIpad,r.tag(41,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const vt=new kt;class Tt extends xe{constructor(){super("CMConfig",[{no:1,name:"ads_control",kind:"message",T:()=>Ae}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.adsControl=Ae.internalBinaryRead(t,t.uint32(),r,a.adsControl);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.adsControl)Ae.internalBinaryWrite(n.adsControl,r.tag(1,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const Nt=new Tt;class Et extends xe{constructor(){super("CmIpad",[{no:5,name:"aid",kind:"scalar",T:3,L:0}])}create(e){const t={aid:0n};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 5:a.aid=t.int64().toBigInt();break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.aid!==0n)r.tag(5,t.Varint).int64(n.aid);let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const Bt=new Et;class Ut extends xe{constructor(){super("TIcon",[{no:1,name:"icon",kind:"scalar",T:9}])}create(e){const t={icon:""};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.icon=t.string();break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.icon!=="")r.tag(1,t.LengthDelimited).string(n.icon);let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const xt=new Ut;class It extends xe{constructor(){super("Relate",[{no:28,name:"cm",kind:"message",T:()=>De}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 28:a.cm=De.internalBinaryRead(t,t.uint32(),r,a.cm);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.cm)De.internalBinaryWrite(n.cm,r.tag(28,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const Rt=new It;switch(true){case true:default:let Ot=vt.fromBinary(Y);if(Ot.cms?.length){Ot.cms=[]}if(Ot.relates?.length){Ot.relates=Ot.relates.filter((e=>{if(e.cm){return false}return true}))}const At=Ot.cmConfig?.adsControl?.value;if(Boolean(At)&&Object.values(At).length!==0){delete Ot.cmConfig;delete Ot.cmIpad}for(const St in Ot.tIcon){if(Ot.tIcon[St]===null){delete Ot.tIcon[St]}}Y=vt.toBinary(Ot);break};break}break;case"bilibili.app.interface.v1.Teenagers":class Je extends xe{constructor(){super("ModeStatus",[{no:1,name:"modes",kind:"message",repeat:1,T:()=>He}])}create(e){const t={modes:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.modes.push(He.internalBinaryRead(t,t.uint32(),r));break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){for(let e=0;e<n.modes.length;e++)He.internalBinaryWrite(n.modes[e],r.tag(1,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const Xe=new Je;class Ge extends xe{constructor(){super("Mode",[{no:2,name:"name",kind:"scalar",T:9},{no:5,name:"f5",kind:"message",T:()=>qe}])}create(e){const t={name:""};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 2:a.name=t.string();break;case 5:a.f5=qe.internalBinaryRead(t,t.uint32(),r,a.f5);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.name!=="")r.tag(2,t.LengthDelimited).string(n.name);if(n.f5)qe.internalBinaryWrite(n.f5,r.tag(5,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const He=new Ge;class Ye extends xe{constructor(){super("F5",[{no:1,name:"f1",kind:"scalar",T:5}])}create(e){const t={f1:0};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.f1=t.int32();break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.f1!==0)r.tag(1,t.Varint).int32(n.f1);let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const qe=new Ye;switch(G?.[1]){case"ModeStatus":data=Xe.fromBinary(Y);data.modes=data.modes.map((e=>{if(e?.name==="teenagers"){if(e?.f5?.f1){e.f5.f1=0;if(debug){console.log("青少年模式弹窗去除")}}}return e}));Y=Xe.toBinary(data);break};break;case"bilibili.community.service.dm.v1.DM":class Qe extends xe{constructor(){super("CommandDm",[{no:1,name:"id",kind:"scalar",T:3,L:0}])}create(e){const t={id:0n};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.id=t.int64().toBigInt();break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.id!==0n)r.tag(1,t.Varint).int64(n.id);let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const et=new Qe;class tt extends xe{constructor(){super("DmView",[{no:1,name:"commandDms",kind:"message",repeat:1,T:()=>et}])}create(e){const t={commandDms:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.commandDms.push(et.internalBinaryRead(t,t.uint32(),r));break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){for(let e=0;e<n.commandDms.length;e++)et.internalBinaryWrite(n.commandDms[e],r.tag(1,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const nt=new tt;class rt extends xe{constructor(){super("DmViewReply",[{no:22,name:"dmView",kind:"message",T:()=>nt}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 22:a.dmView=nt.internalBinaryRead(t,t.uint32(),r,a.dmView);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.dmView)nt.internalBinaryWrite(n.dmView,r.tag(22,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const it=new rt;class at extends xe{constructor(){super("DmSegMobileReply",[{no:1,name:"elems",kind:"message",repeat:1,T:()=>lt}])}create(e){const t={elems:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 1:a.elems.push(lt.internalBinaryRead(t,t.uint32(),r));break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){for(let e=0;e<n.elems.length;e++)lt.internalBinaryWrite(n.elems[e],r.tag(1,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const st=new at;class ot extends xe{constructor(){super("DanmakuElem",[{no:24,name:"colorful",kind:"scalar",T:5}])}create(e){const t={colorful:0};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 24:a.colorful=t.int32();break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.colorful!==0)r.tag(24,t.Varint).int32(n.colorful);let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const lt=new ot;switch(G?.[1]){case"DmView":switch(commandDms){case true:let Dt=it.fromBinary(Y);if(Dt.dmView?.commandDms?.length){Dt.dmView.commandDms.length=0;if(debug){console.log("交互式弹幕去除")}}Y=it.toBinary(Dt);break}break;case"DmSegMobile":switch(colorfulDms){case true:let Lt=st.fromBinary(Y);Lt.elems=Lt.elems.map((e=>{if(e?.colorful===60001){e.colorful=0}return e}));Y=st.toBinary(Lt);break}break}break;case"bilibili.main.community.reply.v1.Reply":class ht extends xe{constructor(){super("MainListReply",[{no:11,name:"cm",kind:"message",T:()=>De}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)z(this,t,e);return t}internalBinaryRead(t,n,r,i){let a=i??this.create(),s=t.pos+n;while(t.pos<s){let[n,i]=t.tag();switch(n){case 11:a.cm=De.internalBinaryRead(t,t.uint32(),r,a.cm);break;default:let s=r.readUnknownField;if(s==="throw")throw new globalThis.Error(`Unknown field ${n}(wire type ${i})for ${this.typeName}`);let o=t.skip(i);if(s!==false)(s===true?e.onRead:s)(this.typeName,a,n,i,o)}}return a}internalBinaryWrite(n,r,i){if(n.cm)De.internalBinaryWrite(n.cm,r.tag(11,t.LengthDelimited).fork(),i).join();let a=i.writeUnknownFields;if(a!==false)(a==true?e.onWrite:a)(this.typeName,n,r);return r}}const ft=new ht;switch(G?.[1]){case"MainList":switch(true){case true:default:let Ft=ft.fromBinary(Y);delete Ft.cm;Y=ft.toBinary(Ft);break};break};break};break};q=newRawBody({header:Re,body:Y});break};$response.body=q;break};break;case false:break}})().catch((e=>console.log(e))).finally((()=>{switch($response){default:{if($response?.headers?.["Content-Encoding"])$response.headers["Content-Encoding"]="identity";if($response?.headers?.["content-encoding"])$response.headers["content-encoding"]="identity";$done($response);break};case undefined:{break}}}));function newRawBody({header:e,body:t},n=undefined){const r=n=="gzip"?1:n=="identity"?0:n==undefined?0:e?.[0]??0;const i=s(t.length);if(n=="gzip")t=pako.gzip(t);let a=new Uint8Array(e.length+t.length);a.set([r],0);a.set(i,1);a.set(t,5);return a;function s(e){let t=new ArrayBuffer(4);let n=new DataView(t);n.setUint32(0,e,false);return new Uint8Array(t)}}function URLs(e){return new class{constructor(e=[]){this.name="URL v1.0.2",this.opts=e,this.json={scheme:"",host:"",path:"",params:{}}}parse(e){let t=e.match(/(?<scheme>.+):\/\/(?<host>[^/]+)\/?(?<path>[^?]+)?\??(?<params>.*)?/)?.groups??null;return t?.path||(t.path=""),t?.params&&(t.params=Object.fromEntries(t.params.split("&").map((e=>e.split("="))))),t}stringify(e=this.json){return e?.params?e.scheme+"://"+e.host+"/"+e.path+"?"+Object.entries(e.params).map((e=>e.join("="))).join("&"):e.scheme+"://"+e.host+"/"+e.path}}(e)}
